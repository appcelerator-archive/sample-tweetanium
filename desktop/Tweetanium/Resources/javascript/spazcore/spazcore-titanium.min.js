var sc={};sc.app={};sc.helpers={};sc.dumplevel=1;sc.setDumpLevel=function(a){sc.dumplevel=parseInt(a,10);};var sch=sc.helpers;sc.events={};Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var b=Date,a=b.prototype,d=b.CultureInfo,g=function(k,j){if(!j){j=2;}return("000"+k).slice(j*-1);};a.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};a.setTimeToNow=function(){var j=new Date();this.setHours(j.getHours());this.setMinutes(j.getMinutes());this.setSeconds(j.getSeconds());this.setMilliseconds(j.getMilliseconds());return this;};b.today=function(){return new Date().clearTime();};b.compare=function(k,j){if(isNaN(k)||isNaN(j)){throw new Error(k+" - "+j);}else{if(k instanceof Date&&j instanceof Date){return(k<j)?-1:(k>j)?1:0;}else{throw new TypeError(k+" - "+j);}}};b.equals=function(k,j){return(k.compareTo(j)===0);};b.getDayNumberFromName=function(k){var t=d.dayNames,j=d.abbreviatedDayNames,q=d.shortestDayNames,p=k.toLowerCase();for(var l=0;l<t.length;l++){if(t[l].toLowerCase()==p||j[l].toLowerCase()==p||q[l].toLowerCase()==p){return l;}}return -1;};b.getMonthNumberFromName=function(k){var p=d.monthNames,j=d.abbreviatedMonthNames,o=k.toLowerCase();for(var l=0;l<p.length;l++){if(p[l].toLowerCase()==o||j[l].toLowerCase()==o){return l;}}return -1;};b.isLeapYear=function(j){return((j%4===0&&j%100!==0)||j%400===0);};b.getDaysInMonth=function(j,k){return[31,(b.isLeapYear(j)?29:28),31,30,31,30,31,31,30,31,30,31][k];};b.getTimezoneAbbreviation=function(m){var l=d.timezones,k;for(var j=0;j<l.length;j++){if(l[j].offset===m){return l[j].name;}}return null;};b.getTimezoneOffset=function(j){var m=d.timezones,l;for(var k=0;k<m.length;k++){if(m[k].name===j.toUpperCase()){return m[k].offset;}}return null;};a.clone=function(){return new Date(this.getTime());};a.compareTo=function(j){return Date.compare(this,j);};a.equals=function(j){return Date.equals(this,j||new Date());};a.between=function(k,j){return this.getTime()>=k.getTime()&&this.getTime()<=j.getTime();};a.isAfter=function(j){return this.compareTo(j||new Date())===1;};a.isBefore=function(j){return(this.compareTo(j||new Date())===-1);};a.isToday=a.isSameDay=function(j){return this.clone().clearTime().equals((j||new Date()).clone().clearTime());};a.addMilliseconds=function(j){this.setMilliseconds(this.getMilliseconds()+j*1);return this;};a.addSeconds=function(j){return this.addMilliseconds(j*1000);};a.addMinutes=function(j){return this.addMilliseconds(j*60000);};a.addHours=function(j){return this.addMilliseconds(j*3600000);};a.addDays=function(j){this.setDate(this.getDate()+j*1);return this;};a.addWeeks=function(j){return this.addDays(j*7);};a.addMonths=function(j){var k=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+j*1);this.setDate(Math.min(k,b.getDaysInMonth(this.getFullYear(),this.getMonth())));return this;};a.addYears=function(j){return this.addMonths(j*12);};a.add=function(k){if(typeof k=="number"){this._orient=k;return this;}var j=k;if(j.milliseconds){this.addMilliseconds(j.milliseconds);}if(j.seconds){this.addSeconds(j.seconds);}if(j.minutes){this.addMinutes(j.minutes);}if(j.hours){this.addHours(j.hours);}if(j.weeks){this.addWeeks(j.weeks);}if(j.months){this.addMonths(j.months);}if(j.years){this.addYears(j.years);}if(j.days){this.addDays(j.days);}return this;};var e,f,c;a.getWeek=function(){var t,q,p,o,m,l,k,j,v,u;e=(!e)?this.getFullYear():e;f=(!f)?this.getMonth()+1:f;c=(!c)?this.getDate():c;if(f<=2){t=e-1;q=(t/4|0)-(t/100|0)+(t/400|0);p=((t-1)/4|0)-((t-1)/100|0)+((t-1)/400|0);v=q-p;m=0;l=c-1+(31*(f-1));}else{t=e;q=(t/4|0)-(t/100|0)+(t/400|0);p=((t-1)/4|0)-((t-1)/100|0)+((t-1)/400|0);v=q-p;m=v+1;l=c+((153*(f-3)+2)/5)+58+v;}k=(t+q)%7;o=(l+k-m)%7;j=(l+3-o)|0;if(j<0){u=53-((k-v)/5|0);}else{if(j>364+v){u=1;}else{u=(j/7|0)+1;}}e=f=c=null;return u;};a.getISOWeek=function(){e=this.getUTCFullYear();f=this.getUTCMonth()+1;c=this.getUTCDate();return g(this.getWeek());};a.setWeek=function(j){return this.moveToDayOfWeek(1).addWeeks(j-this.getWeek());};var h=function(m,l,j,k){if(typeof m=="undefined"){return false;}else{if(typeof m!="number"){throw new TypeError(m+" is not a Number.");}else{if(m<l||m>j){throw new RangeError(m+" is not a valid value for "+k+".");}}}return true;};b.validateMillisecond=function(j){return h(j,0,999,"millisecond");};b.validateSecond=function(j){return h(j,0,59,"second");};b.validateMinute=function(j){return h(j,0,59,"minute");};b.validateHour=function(j){return h(j,0,23,"hour");};b.validateDay=function(k,j,l){return h(k,1,b.getDaysInMonth(j,l),"day");};b.validateMonth=function(j){return h(j,0,11,"month");};b.validateYear=function(j){return h(j,0,9999,"year");};a.set=function(j){if(b.validateMillisecond(j.millisecond)){this.addMilliseconds(j.millisecond-this.getMilliseconds());}if(b.validateSecond(j.second)){this.addSeconds(j.second-this.getSeconds());}if(b.validateMinute(j.minute)){this.addMinutes(j.minute-this.getMinutes());}if(b.validateHour(j.hour)){this.addHours(j.hour-this.getHours());}if(b.validateMonth(j.month)){this.addMonths(j.month-this.getMonth());}if(b.validateYear(j.year)){this.addYears(j.year-this.getFullYear());}if(b.validateDay(j.day,this.getFullYear(),this.getMonth())){this.addDays(j.day-this.getDate());}if(j.timezone){this.setTimezone(j.timezone);}if(j.timezoneOffset){this.setTimezoneOffset(j.timezoneOffset);}if(j.week&&h(j.week,0,53,"week")){this.setWeek(j.week);}return this;};a.moveToFirstDayOfMonth=function(){return this.set({day:1});};a.moveToLastDayOfMonth=function(){return this.set({day:b.getDaysInMonth(this.getFullYear(),this.getMonth())});};a.moveToNthOccurrence=function(k,l){var j=0;if(l>0){j=l-1;}else{if(l===-1){this.moveToLastDayOfMonth();if(this.getDay()!==k){this.moveToDayOfWeek(k,-1);}return this;}}return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(k,+1).addWeeks(j);};a.moveToDayOfWeek=function(j,k){var l=(j-this.getDay()+7*(k||+1))%7;return this.addDays((l===0)?l+=7*(k||+1):l);};a.moveToMonth=function(l,j){var k=(l-this.getMonth()+12*(j||+1))%12;return this.addMonths((k===0)?k+=12*(j||+1):k);};a.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1;};a.getTimezone=function(){return b.getTimezoneAbbreviation(this.getUTCOffset());};a.setTimezoneOffset=function(l){var j=this.getTimezoneOffset(),k=Number(l)*-6/10;return this.addMinutes(k-j);};a.setTimezone=function(j){return this.setTimezoneOffset(b.getTimezoneOffset(j));};a.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset());};a.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!=this.getTimezoneOffset();};a.getUTCOffset=function(){var k=this.getTimezoneOffset()*-10/6,j;if(k<0){j=(k-10000).toString();return j.charAt(0)+j.substr(2);}else{j=(k+10000).toString();return"+"+j.substr(1);}};a.getElapsed=function(j){return(j||new Date())-this;};if(!a.toISOString){a.toISOString=function(){function j(k){return k<10?"0"+k:k;}return'"'+this.getUTCFullYear()+"-"+j(this.getUTCMonth()+1)+"-"+j(this.getUTCDate())+"T"+j(this.getUTCHours())+":"+j(this.getUTCMinutes())+":"+j(this.getUTCSeconds())+'Z"';};}a._toString=a.toString;a.toString=function(l){var j=this;if(l&&l.length==1){var m=d.formatPatterns;j.t=j.toString;switch(l){case"d":return j.t(m.shortDate);case"D":return j.t(m.longDate);case"F":return j.t(m.fullDateTime);case"m":return j.t(m.monthDay);case"r":return j.t(m.rfc1123);case"s":return j.t(m.sortableDateTime);case"t":return j.t(m.shortTime);case"T":return j.t(m.longTime);case"u":return j.t(m.universalSortableDateTime);case"y":return j.t(m.yearMonth);}}var k=function(o){switch(o*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};return l?l.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(n){if(n.charAt(0)==="\\"){return n.replace("\\","");}j.h=j.getHours;switch(n){case"hh":return g(j.h()<13?(j.h()===0?12:j.h()):(j.h()-12));case"h":return j.h()<13?(j.h()===0?12:j.h()):(j.h()-12);case"HH":return g(j.h());case"H":return j.h();case"mm":return g(j.getMinutes());case"m":return j.getMinutes();case"ss":return g(j.getSeconds());case"s":return j.getSeconds();case"yyyy":return g(j.getFullYear(),4);case"yy":return g(j.getFullYear());case"dddd":return d.dayNames[j.getDay()];case"ddd":return d.abbreviatedDayNames[j.getDay()];case"dd":return g(j.getDate());case"d":return j.getDate();case"MMMM":return d.monthNames[j.getMonth()];case"MMM":return d.abbreviatedMonthNames[j.getMonth()];case"MM":return g((j.getMonth()+1));case"M":return j.getMonth()+1;case"t":return j.h()<12?d.amDesignator.substring(0,1):d.pmDesignator.substring(0,1);case"tt":return j.h()<12?d.amDesignator:d.pmDesignator;case"S":return k(j.getDate());default:return n;}}):this._toString();};}());(function(){Date.Parsing={Exception:function(j){this.message="Parse error at '"+j.substring(0,10)+" ...'";}};var a=Date.Parsing;var c=a.Operators={rtoken:function(j){return function(k){var l=k.match(j);if(l){return([l[0],k.substring(l[0].length)]);}else{throw new a.Exception(k);}};},token:function(j){return function(k){return c.rtoken(new RegExp("^s*"+k+"s*"))(k);};},stoken:function(j){return c.rtoken(new RegExp("^"+j));},until:function(j){return function(k){var l=[],n=null;while(k.length){try{n=j.call(this,k);}catch(m){l.push(n[0]);k=n[1];continue;}break;}return[l,k];};},many:function(j){return function(k){var n=[],l=null;while(k.length){try{l=j.call(this,k);}catch(m){return[n,k];}n.push(l[0]);k=l[1];}return[n,k];};},optional:function(j){return function(k){var l=null;try{l=j.call(this,k);}catch(m){return[null,k];}return[l[0],l[1]];};},not:function(j){return function(k){try{j.call(this,k);}catch(l){return[null,k];}throw new a.Exception(k);};},ignore:function(j){return j?function(k){var l=null;l=j.call(this,k);return[null,l[1]];}:null;},product:function(){var k=arguments[0],l=Array.prototype.slice.call(arguments,1),m=[];for(var j=0;j<k.length;j++){m.push(c.each(k[j],l));}return m;},cache:function(l){var j={},k=null;return function(m){try{k=j[m]=(j[m]||l.call(this,m));}catch(n){k=j[m]=n;}if(k instanceof a.Exception){throw k;}else{return k;}};},any:function(){var j=arguments;return function(l){var m=null;for(var k=0;k<j.length;k++){if(j[k]==null){continue;}try{m=(j[k].call(this,l));}catch(n){m=null;}if(m){return m;}}throw new a.Exception(l);};},each:function(){var j=arguments;return function(l){var o=[],m=null;for(var k=0;k<j.length;k++){if(j[k]==null){continue;}try{m=(j[k].call(this,l));}catch(n){throw new a.Exception(l);}o.push(m[0]);l=m[1];}return[o,l];};},all:function(){var k=arguments,j=j;return j.each(j.optional(k));},sequence:function(j,k,l){k=k||c.rtoken(/^\s*/);l=l||null;if(j.length==1){return j[0];}return function(p){var t=null,u=null;var w=[];for(var o=0;o<j.length;o++){try{t=j[o].call(this,p);}catch(v){break;}w.push(t[0]);try{u=k.call(this,t[1]);}catch(n){u=null;break;}p=u[1];}if(!t){throw new a.Exception(p);}if(u){throw new a.Exception(u[1]);}if(l){try{t=l.call(this,t[1]);}catch(m){throw new a.Exception(t[1]);}}return[w,(t?t[1]:p)];};},between:function(k,l,j){j=j||k;var m=c.each(c.ignore(k),l,c.ignore(j));return function(n){var o=m.call(this,n);return[[o[0][0],r[0][2]],o[1]];};},list:function(j,k,l){k=k||c.rtoken(/^\s*/);l=l||null;return(j instanceof Array?c.each(c.product(j.slice(0,-1),c.ignore(k)),j.slice(-1),c.ignore(l)):c.each(c.many(c.each(j,c.ignore(k))),px,c.ignore(l)));},set:function(j,k,l){k=k||c.rtoken(/^\s*/);l=l||null;return function(C){var m=null,o=null,n=null,t=null,u=[[],C],B=false;for(var w=0;w<j.length;w++){n=null;o=null;m=null;B=(j.length==1);try{m=j[w].call(this,C);}catch(z){continue;}t=[[m[0]],m[1]];if(m[1].length>0&&!B){try{n=k.call(this,m[1]);}catch(A){B=true;}}else{B=true;}if(!B&&n[1].length===0){B=true;}if(!B){var x=[];for(var v=0;v<j.length;v++){if(w!=v){x.push(j[v]);}}o=c.set(x,k).call(this,n[1]);if(o[0].length>0){t[0]=t[0].concat(o[0]);t[1]=o[1];}}if(t[1].length<u[1].length){u=t;}if(u[1].length===0){break;}}if(u[0].length===0){return u;}if(l){try{n=l.call(this,u[1]);}catch(y){throw new a.Exception(u[1]);}u[1]=n[1];}return u;};},forward:function(j,k){return function(l){return j[k].call(this,l);};},replace:function(k,j){return function(l){var m=k.call(this,l);return[j,m[1]];};},process:function(k,j){return function(l){var m=k.call(this,l);return[j.call(this,m[0]),m[1]];};},min:function(j,k){return function(l){var m=k.call(this,l);if(m[0].length<j){throw new a.Exception(l);}return m;};}};var h=function(j){return function(){var k=null,n=[];if(arguments.length>1){k=Array.prototype.slice.call(arguments);}else{if(arguments[0] instanceof Array){k=arguments[0];}}if(k){for(var m=0,l=k.shift();m<l.length;m++){k.unshift(l[m]);n.push(j.apply(null,k));k.shift();return n;}}else{return j.apply(null,arguments);}};};var g="optional not ignore cache".split(/\s/);for(var d=0;d<g.length;d++){c[g[d]]=h(c[g[d]]);}var f=function(j){return function(){if(arguments[0] instanceof Array){return j.apply(null,arguments[0]);}else{return j.apply(null,arguments);}};};var e="each any all".split(/\s/);for(var b=0;b<e.length;b++){c[e[b]]=f(c[e[b]]);}}());(function(){var e=Date,m=e.prototype,f=e.CultureInfo;var h=function(n){var o=[];for(var g=0;g<n.length;g++){if(n[g] instanceof Array){o=o.concat(h(n[g]));}else{if(n[g]){o.push(n[g]);}}}return o;};e.Grammar={};e.Translator={hour:function(g){return function(){this.hour=Number(g);};},minute:function(g){return function(){this.minute=Number(g);};},second:function(g){return function(){this.second=Number(g);};},meridian:function(g){return function(){this.meridian=g.slice(0,1).toLowerCase();};},timezone:function(g){return function(){var o=g.replace(/[^\d\+\-]/g,"");if(o.length){this.timezoneOffset=Number(o);}else{this.timezone=g.toLowerCase();}};},day:function(g){var n=g[0];return function(){this.day=Number(n.match(/\d+/)[0]);};},month:function(g){return function(){this.month=(g.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(g)/4:Number(g)-1;};},year:function(g){return function(){var o=Number(g);this.year=((g.length>2)?o:(o+(((o+2000)<f.twoDigitYearMax)?2000:1900)));};},rday:function(g){return function(){switch(g){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(g){g=(g instanceof Array)?g:[g];for(var o=0;o<g.length;o++){if(g[o]){g[o].call(this);}}var n=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=n.getDate();}if(!this.year){this.year=n.getFullYear();}if(!this.month&&this.month!==0){this.month=n.getMonth();}if(!this.day){this.day=1;}if(!this.hour){this.hour=0;}if(!this.minute){this.minute=0;}if(!this.second){this.second=0;}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.day>e.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}var p=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){p.set({timezone:this.timezone});}else{if(this.timezoneOffset){p.set({timezoneOffset:this.timezoneOffset});}}return p;},finish:function(g){g=(g instanceof Array)?h(g):[g];if(g.length===0){return null;}for(var s=0;s<g.length;s++){if(typeof g[s]=="function"){g[s].call(this);}}var o=e.today();if(this.now&&!this.unit&&!this.operator){return new Date();}else{if(this.now){o=new Date();}}var t=!!(this.days&&this.days!==null||this.orient||this.operator);var u,q,p;p=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){o.setTimeToNow();}if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;t=true;}}if(!t&&this.weekday&&!this.day&&!this.days){var n=Date[this.weekday]();this.day=n.getDate();if(!this.month){this.month=n.getMonth();}this.year=n.getFullYear();}if(t&&this.weekday&&this.unit!="month"){this.unit="day";u=(e.getDayNumberFromName(this.weekday)-o.getDay());q=7;this.days=u?((u+(p*q))%q):(p*q);}if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null;}if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1;}if(this.month&&!this.day&&this.value){o.set({day:this.value*1});if(!t){this.day=this.value*1;}}if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;t=true;}if(t&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";u=(this.month-o.getMonth());q=12;this.months=u?((u+(p*q))%q):(p*q);this.month=null;}if(!this.unit){this.unit="day";}if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*p;}else{if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}this[this.unit+"s"]=this.value*p;}}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.weekday&&!this.day&&!this.days){var n=Date[this.weekday]();this.day=n.getDate();if(n.getMonth()!==o.getMonth()){this.month=n.getMonth();}}if((this.month||this.month===0)&&!this.day){this.day=1;}if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value);}if(t&&this.timezone&&this.day&&this.days){this.day=this.days;}return(t)?o.add(this):o.set(this);}};var j=e.Parsing.Operators,d=e.Grammar,l=e.Translator,b;d.datePartDelimiter=j.rtoken(/^([\s\-\.\,\/\x27]+)/);d.timePartDelimiter=j.stoken(":");d.whiteSpace=j.rtoken(/^\s*/);d.generalDelimiter=j.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};d.ctoken=function(q){var p=a[q];if(!p){var s=f.regexPatterns;var o=q.split(/\s+/),n=[];for(var g=0;g<o.length;g++){n.push(j.replace(j.rtoken(s[o[g]]),o[g]));}p=a[q]=j.any.apply(null,n);}return p;};d.ctoken2=function(g){return j.rtoken(f.regexPatterns[g]);};d.h=j.cache(j.process(j.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),l.hour));d.hh=j.cache(j.process(j.rtoken(/^(0[0-9]|1[0-2])/),l.hour));d.H=j.cache(j.process(j.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),l.hour));d.HH=j.cache(j.process(j.rtoken(/^([0-1][0-9]|2[0-3])/),l.hour));d.m=j.cache(j.process(j.rtoken(/^([0-5][0-9]|[0-9])/),l.minute));d.mm=j.cache(j.process(j.rtoken(/^[0-5][0-9]/),l.minute));d.s=j.cache(j.process(j.rtoken(/^([0-5][0-9]|[0-9])/),l.second));d.ss=j.cache(j.process(j.rtoken(/^[0-5][0-9]/),l.second));d.hms=j.cache(j.sequence([d.H,d.m,d.s],d.timePartDelimiter));d.t=j.cache(j.process(d.ctoken2("shortMeridian"),l.meridian));d.tt=j.cache(j.process(d.ctoken2("longMeridian"),l.meridian));d.z=j.cache(j.process(j.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),l.timezone));d.zz=j.cache(j.process(j.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),l.timezone));d.zzz=j.cache(j.process(d.ctoken2("timezone"),l.timezone));d.timeSuffix=j.each(j.ignore(d.whiteSpace),j.set([d.tt,d.zzz]));d.time=j.each(j.optional(j.ignore(j.stoken("T"))),d.hms,d.timeSuffix);d.d=j.cache(j.process(j.each(j.rtoken(/^([0-2]\d|3[0-1]|\d)/),j.optional(d.ctoken2("ordinalSuffix"))),l.day));d.dd=j.cache(j.process(j.each(j.rtoken(/^([0-2]\d|3[0-1])/),j.optional(d.ctoken2("ordinalSuffix"))),l.day));d.ddd=d.dddd=j.cache(j.process(d.ctoken("sun mon tue wed thu fri sat"),function(g){return function(){this.weekday=g;};}));d.M=j.cache(j.process(j.rtoken(/^(1[0-2]|0\d|\d)/),l.month));d.MM=j.cache(j.process(j.rtoken(/^(1[0-2]|0\d)/),l.month));d.MMM=d.MMMM=j.cache(j.process(d.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),l.month));d.y=j.cache(j.process(j.rtoken(/^(\d\d?)/),l.year));d.yy=j.cache(j.process(j.rtoken(/^(\d\d)/),l.year));d.yyy=j.cache(j.process(j.rtoken(/^(\d\d?\d?\d?)/),l.year));d.yyyy=j.cache(j.process(j.rtoken(/^(\d\d\d\d)/),l.year));b=function(){return j.each(j.any.apply(null,arguments),j.not(d.ctoken2("timeContext")));};d.day=b(d.d,d.dd);d.month=b(d.M,d.MMM);d.year=b(d.yyyy,d.yy);d.orientation=j.process(d.ctoken("past future"),function(g){return function(){this.orient=g;};});d.operator=j.process(d.ctoken("add subtract"),function(g){return function(){this.operator=g;};});d.rday=j.process(d.ctoken("yesterday tomorrow today now"),l.rday);d.unit=j.process(d.ctoken("second minute hour day week month year"),function(g){return function(){this.unit=g;};});d.value=j.process(j.rtoken(/^\d\d?(st|nd|rd|th)?/),function(g){return function(){this.value=g.replace(/\D/g,"");};});d.expression=j.set([d.rday,d.operator,d.value,d.unit,d.orientation,d.ddd,d.MMM]);b=function(){return j.set(arguments,d.datePartDelimiter);};d.mdy=b(d.ddd,d.month,d.day,d.year);d.ymd=b(d.ddd,d.year,d.month,d.day);d.dmy=b(d.ddd,d.day,d.month,d.year);d.date=function(g){return((d[f.dateElementOrder]||d.mdy).call(this,g));};d.format=j.process(j.many(j.any(j.process(j.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(g){if(d[g]){return d[g];}else{throw e.Parsing.Exception(g);}}),j.process(j.rtoken(/^[^dMyhHmstz]+/),function(g){return j.ignore(j.stoken(g));}))),function(g){return j.process(j.each.apply(null,g),l.finishExact);});var k={};var c=function(g){return k[g]=(k[g]||d.format(g)[0]);};d.formats=function(n){if(n instanceof Array){var o=[];for(var g=0;g<n.length;g++){o.push(c(n[g]));}return j.any.apply(null,o);}else{return c(n);}};d._formats=d.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);d._start=j.process(j.set([d.date,d.time,d.expression],d.generalDelimiter,d.whiteSpace),l.finish);d.start=function(g){try{var n=d._formats.call({},g);if(n[1].length===0){return n;}}catch(o){}return d._start.call({},g);};e._parse=e.parse;e.parse=function(g){var n=null;if(!g){return null;}if(g instanceof Date){return g;}try{n=e.Grammar.start.call({},g.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"));}catch(o){return null;}return((n[1].length===0)?n[0]:null);};e.getParseFunction=function(n){var g=e.Grammar.formats(n);return function(o){var p=null;try{p=g.call({},o);}catch(q){return null;}return((p[1].length===0)?p[0]:null);};};e.parseExact=function(g,n){return e.getParseFunction(n)(g);};}());if(!this.JSON){JSON={};}(function(){function f(n){return n<10?"0"+n:n;}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z";};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");}return str("",{"":value});};}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");};}})();(function(){var n=this;var j=n._;var a=function(l){this._wrapped=l;};var g=typeof StopIteration!=="undefined"?StopIteration:"__break__";var p=n._=function(l){return new a(l);};if(typeof exports!=="undefined"){exports._=p;}var o=Array.prototype.slice,f=Array.prototype.unshift,b=Object.prototype.toString,d=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;p.VERSION="0.5.1";p.each=function(z,w,v){var t=0;try{if(z.forEach){z.forEach(w,v);}else{if(p.isArray(z)||p.isArguments(z)){for(var u=0,s=z.length;u<s;u++){w.call(v,z[u],u,z);}}else{var x=p.keys(z),s=x.length;for(var u=0;u<s;u++){w.call(v,z[x[u]],x[u],z);}}}}catch(y){if(y!=g){throw y;}}return z;};p.map=function(u,t,s){if(u&&p.isFunction(u.map)){return u.map(t,s);}var l=[];p.each(u,function(x,v,w){l.push(t.call(s,x,v,w));});return l;};p.reduce=function(u,l,t,s){if(u&&p.isFunction(u.reduce)){return u.reduce(p.bind(t,s),l);}p.each(u,function(x,v,w){l=t.call(s,l,x,v,w);});return l;};p.reduceRight=function(u,l,t,s){if(u&&p.isFunction(u.reduceRight)){return u.reduceRight(p.bind(t,s),l);}var v=p.clone(p.toArray(u)).reverse();p.each(v,function(x,w){l=t.call(s,l,x,w,u);});return l;};p.detect=function(u,t,s){var l;p.each(u,function(x,v,w){if(t.call(s,x,v,w)){l=x;p.breakLoop();}});return l;};p.select=function(u,t,s){if(u&&p.isFunction(u.filter)){return u.filter(t,s);}var l=[];p.each(u,function(x,v,w){t.call(s,x,v,w)&&l.push(x);});return l;};p.reject=function(u,t,s){var l=[];p.each(u,function(x,v,w){!t.call(s,x,v,w)&&l.push(x);});return l;};p.all=function(u,t,s){t=t||p.identity;if(u&&p.isFunction(u.every)){return u.every(t,s);}var l=true;p.each(u,function(x,v,w){if(!(l=l&&t.call(s,x,v,w))){p.breakLoop();}});return l;};p.any=function(u,t,s){t=t||p.identity;if(u&&p.isFunction(u.some)){return u.some(t,s);}var l=false;p.each(u,function(x,v,w){if(l=t.call(s,x,v,w)){p.breakLoop();}});return l;};p.include=function(t,s){if(p.isArray(t)){return p.indexOf(t,s)!=-1;}var l=false;p.each(t,function(u){if(l=u===s){p.breakLoop();}});return l;};p.invoke=function(s,t){var l=p.rest(arguments,2);return p.map(s,function(u){return(t?u[t]:u).apply(u,l);});};p.pluck=function(s,l){return p.map(s,function(t){return t[l];});};p.max=function(u,t,s){if(!t&&p.isArray(u)){return Math.max.apply(Math,u);}var l={computed:-Infinity};p.each(u,function(y,v,x){var w=t?t.call(s,y,v,x):y;w>=l.computed&&(l={value:y,computed:w});});return l.value;};p.min=function(u,t,s){if(!t&&p.isArray(u)){return Math.min.apply(Math,u);}var l={computed:Infinity};p.each(u,function(y,v,x){var w=t?t.call(s,y,v,x):y;w<l.computed&&(l={value:y,computed:w});});return l.value;};p.sortBy=function(t,s,l){return p.pluck(p.map(t,function(w,u,v){return{value:w,criteria:s.call(l,w,u,v)};}).sort(function(x,w){var v=x.criteria,u=w.criteria;return v<u?-1:v>u?1:0;}),"value");};p.sortedIndex=function(w,v,t){t=t||p.identity;var l=0,u=w.length;while(l<u){var s=(l+u)>>1;t(w[s])<t(v)?l=s+1:u=s;}return l;};p.toArray=function(l){if(!l){return[];}if(l.toArray){return l.toArray();}if(p.isArray(l)){return l;}if(p.isArguments(l)){return o.call(l);}return p.map(l,function(s){return s;});};p.size=function(l){return p.toArray(l).length;};p.first=function(t,s,l){return s&&!l?o.call(t,0,s):t[0];};p.rest=function(t,l,s){return o.call(t,p.isUndefined(l)||s?1:l);};p.last=function(l){return l[l.length-1];};p.compact=function(l){return p.select(l,function(s){return !!s;});};p.flatten=function(l){return p.reduce(l,[],function(s,t){if(p.isArray(t)){return s.concat(p.flatten(t));}s.push(t);return s;});};p.without=function(s){var l=p.rest(arguments);return p.select(s,function(t){return !p.include(l,t);});};p.uniq=function(s,l){return p.reduce(s,[],function(t,v,u){if(0==u||(l===true?p.last(t)!=v:!p.include(t,v))){t.push(v);}return t;});};p.intersect=function(s){var l=p.rest(arguments);return p.select(p.uniq(s),function(t){return p.all(l,function(u){return p.indexOf(u,t)>=0;});});};p.zip=function(){var l=p.toArray(arguments);var u=p.max(p.pluck(l,"length"));var t=new Array(u);for(var s=0;s<u;s++){t[s]=p.pluck(l,String(s));}return t;};p.indexOf=function(v,u){if(v.indexOf){return v.indexOf(u);}for(var t=0,s=v.length;t<s;t++){if(v[t]===u){return t;}}return -1;};p.lastIndexOf=function(t,s){if(t.lastIndexOf){return t.lastIndexOf(s);}var l=t.length;while(l--){if(t[l]===s){return l;}}return -1;};p.range=function(l,x,s){var y=p.toArray(arguments);var w=y.length<=1;var l=w?0:y[0],x=w?y[0]:y[1],s=y[2]||1;var v=Math.ceil((x-l)/s);if(v<=0){return[];}var u=new Array(v);for(var t=l,z=0;true;t+=s){if((s>0?t-x:x-t)>=0){return u;}u[z++]=t;}};p.bind=function(s,t){var l=p.rest(arguments,2);return function(){return s.apply(t||n,l.concat(p.toArray(arguments)));};};p.bindAll=function(s){var l=p.rest(arguments);if(l.length==0){l=p.functions(s);}p.each(l,function(t){s[t]=p.bind(s[t],s);});return s;};p.delay=function(s,t){var l=p.rest(arguments,2);return setTimeout(function(){return s.apply(s,l);},t);};p.defer=function(l){return p.delay.apply(p,[l,1].concat(p.rest(arguments)));};p.wrap=function(l,s){return function(){var t=[l].concat(p.toArray(arguments));return s.apply(s,t);};};p.compose=function(){var l=p.toArray(arguments);return function(){var s=p.toArray(arguments);for(var t=l.length-1;t>=0;t--){s=[l[t].apply(this,s)];}return s[0];};};p.keys=function(t){if(p.isArray(t)){return p.range(0,t.length);}var s=[];for(var l in t){if(d.call(t,l)){s.push(l);}}return s;};p.values=function(l){return p.map(l,p.identity);};p.functions=function(l){return p.select(p.keys(l),function(s){return p.isFunction(l[s]);}).sort();};p.extend=function(l,t){for(var s in t){l[s]=t[s];}return l;};p.clone=function(l){if(p.isArray(l)){return l.slice(0);}return p.extend({},l);};p.isEqual=function(s,l){if(s===l){return true;}var v=typeof(s),x=typeof(l);if(v!=x){return false;}if(s==l){return true;}if((!s&&l)||(s&&!l)){return false;}if(s.isEqual){return s.isEqual(l);}if(p.isDate(s)&&p.isDate(l)){return s.getTime()===l.getTime();}if(p.isNaN(s)&&p.isNaN(l)){return true;}if(p.isRegExp(s)&&p.isRegExp(l)){return s.source===l.source&&s.global===l.global&&s.ignoreCase===l.ignoreCase&&s.multiline===l.multiline;}if(v!=="object"){return false;}if(s.length&&(s.length!==l.length)){return false;}var t=p.keys(s),w=p.keys(l);if(t.length!=w.length){return false;}for(var u in s){if(!p.isEqual(s[u],l[u])){return false;}}return true;};p.isEmpty=function(l){return p.keys(l).length==0;};p.isElement=function(l){return !!(l&&l.nodeType==1);};p.isArguments=function(l){return l&&p.isNumber(l.length)&&!p.isArray(l)&&!m.call(l,"length");};p.isNaN=function(l){return p.isNumber(l)&&isNaN(l);};p.isNull=function(l){return l===null;};p.isUndefined=function(l){return typeof l=="undefined";};var k=["Array","Date","Function","Number","RegExp","String"];for(var h=0,e=k.length;h<e;h++){(function(){var l="[object "+k[h]+"]";p["is"+k[h]]=function(s){return b.call(s)==l;};})();}p.noConflict=function(){n._=j;return this;};p.identity=function(l){return l;};p.breakLoop=function(){throw g;};var c=0;p.uniqueId=function(l){var s=c++;return l?l+s:s;};p.template=function(t,s){var l=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return s?l(s):l;};p.forEach=p.each;p.foldl=p.inject=p.reduce;p.foldr=p.reduceRight;p.filter=p.select;p.every=p.all;p.some=p.any;p.head=p.first;p.tail=p.rest;p.methods=p.functions;var q=function(s,l){return l?p(s).chain():s;};p.each(p.functions(p),function(l){var s=p[l];a.prototype[l]=function(){f.call(arguments,this._wrapped);return q(s.apply(p,arguments),this._chain);};});p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(l){var s=Array.prototype[l];a.prototype[l]=function(){s.apply(this._wrapped,arguments);return q(this._wrapped,this._chain);};});p.each(["concat","join","slice"],function(l){var s=Array.prototype[l];a.prototype[l]=function(){return q(s.apply(this._wrapped,arguments),this._chain);};});a.prototype.chain=function(){this._chain=true;return this;};a.prototype.value=function(){return this._wrapped;};})();var hexcase=0;var b64pad="";function hex_sha1(a){return rstr2hex(rstr_sha1(str2rstr_utf8(a)));}function b64_sha1(a){return rstr2b64(rstr_sha1(str2rstr_utf8(a)));}function any_sha1(a,b){return rstr2any(rstr_sha1(str2rstr_utf8(a)),b);}function hex_hmac_sha1(a,b){return rstr2hex(rstr_hmac_sha1(str2rstr_utf8(a),str2rstr_utf8(b)));}function b64_hmac_sha1(a,b){return rstr2b64(rstr_hmac_sha1(str2rstr_utf8(a),str2rstr_utf8(b)));}function any_hmac_sha1(a,c,b){return rstr2any(rstr_hmac_sha1(str2rstr_utf8(a),str2rstr_utf8(c)),b);}function sha1_vm_test(){return hex_sha1("abc").toLowerCase()=="a9993e364706816aba3e25717850c26c9cd0d89d";}function rstr_sha1(a){return binb2rstr(binb_sha1(rstr2binb(a),a.length*8));}function rstr_hmac_sha1(c,f){var e=rstr2binb(c);if(e.length>16){e=binb_sha1(e,c.length*8);}var a=Array(16),d=Array(16);for(var b=0;b<16;b++){a[b]=e[b]^909522486;d[b]=e[b]^1549556828;}var g=binb_sha1(a.concat(rstr2binb(f)),512+f.length*8);return binb2rstr(binb_sha1(d.concat(g),512+160));}function rstr2hex(c){try{hexcase;}catch(g){hexcase=0;}var f=hexcase?"0123456789ABCDEF":"0123456789abcdef";var b="";var a;for(var d=0;d<c.length;d++){a=c.charCodeAt(d);b+=f.charAt((a>>>4)&15)+f.charAt(a&15);}return b;}function rstr2b64(c){try{b64pad;}catch(h){b64pad="";}var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b="";var a=c.length;for(var f=0;f<a;f+=3){var k=(c.charCodeAt(f)<<16)|(f+1<a?c.charCodeAt(f+1)<<8:0)|(f+2<a?c.charCodeAt(f+2):0);for(var d=0;d<4;d++){if(f*8+d*6>c.length*8){b+=b64pad;}else{b+=g.charAt((k>>>6*(3-d))&63);}}}return b;}function rstr2any(k,c){var b=c.length;var j=Array();var h,a,l,e;var g=Array(Math.ceil(k.length/2));for(h=0;h<g.length;h++){g[h]=(k.charCodeAt(h*2)<<8)|k.charCodeAt(h*2+1);}while(g.length>0){e=Array();l=0;for(h=0;h<g.length;h++){l=(l<<16)+g[h];a=Math.floor(l/b);l-=a*b;if(e.length>0||a>0){e[e.length]=a;}}j[j.length]=l;g=e;}var d="";for(h=j.length-1;h>=0;h--){d+=c.charAt(j[h]);}var f=Math.ceil(k.length*8/(Math.log(c.length)/Math.log(2)));for(h=d.length;h<f;h++){d=c[0]+d;}return d;}function str2rstr_utf8(c){var b="";var d=-1;var a,e;while(++d<c.length){a=c.charCodeAt(d);e=d+1<c.length?c.charCodeAt(d+1):0;if(55296<=a&&a<=56319&&56320<=e&&e<=57343){a=65536+((a&1023)<<10)+(e&1023);d++;}if(a<=127){b+=String.fromCharCode(a);}else{if(a<=2047){b+=String.fromCharCode(192|((a>>>6)&31),128|(a&63));}else{if(a<=65535){b+=String.fromCharCode(224|((a>>>12)&15),128|((a>>>6)&63),128|(a&63));}else{if(a<=2097151){b+=String.fromCharCode(240|((a>>>18)&7),128|((a>>>12)&63),128|((a>>>6)&63),128|(a&63));}}}}}return b;}function str2rstr_utf16le(b){var a="";for(var c=0;c<b.length;c++){a+=String.fromCharCode(b.charCodeAt(c)&255,(b.charCodeAt(c)>>>8)&255);}return a;}function str2rstr_utf16be(b){var a="";for(var c=0;c<b.length;c++){a+=String.fromCharCode((b.charCodeAt(c)>>>8)&255,b.charCodeAt(c)&255);}return a;}function rstr2binb(b){var a=Array(b.length>>2);for(var c=0;c<a.length;c++){a[c]=0;}for(var c=0;c<b.length*8;c+=8){a[c>>5]|=(b.charCodeAt(c/8)&255)<<(24-c%32);}return a;}function binb2rstr(b){var a="";for(var c=0;c<b.length*32;c+=8){a+=String.fromCharCode((b[c>>5]>>>(24-c%32))&255);}return a;}function binb_sha1(y,o){y[o>>5]|=128<<(24-o%32);y[((o+64>>9)<<4)+15]=o;var z=Array(80);var v=1732584193;var u=-271733879;var s=-1732584194;var q=271733878;var p=-1009589776;for(var l=0;l<y.length;l+=16){var n=v;var m=u;var k=s;var h=q;var f=p;for(var g=0;g<80;g++){if(g<16){z[g]=y[l+g];}else{z[g]=bit_rol(z[g-3]^z[g-8]^z[g-14]^z[g-16],1);}var A=safe_add(safe_add(bit_rol(v,5),sha1_ft(g,u,s,q)),safe_add(safe_add(p,z[g]),sha1_kt(g)));p=q;q=s;s=bit_rol(u,30);u=v;v=A;}v=safe_add(v,n);u=safe_add(u,m);s=safe_add(s,k);q=safe_add(q,h);p=safe_add(p,f);}return Array(v,u,s,q,p);}function sha1_ft(e,a,g,f){if(e<20){return(a&g)|((~a)&f);}if(e<40){return a^g^f;}if(e<60){return(a&g)|(a&f)|(g&f);}return a^g^f;}function sha1_kt(a){return(a<20)?1518500249:(a<40)?1859775393:(a<60)?-1894007588:-899497514;}function safe_add(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535);}function bit_rol(a,b){return(a<<b)|(a>>>(32-b));}var OAuth;if(OAuth==null){OAuth={};}OAuth.setProperties=function setProperties(a,c){if(a!=null&&c!=null){for(var b in c){a[b]=c[b];}}return a;};OAuth.setProperties(OAuth,{percentEncode:function percentEncode(b){if(b==null){return"";}if(b instanceof Array){var c="";for(var a=0;a<b.length;++b){if(c!=""){c+="&";}c+=OAuth.percentEncode(b[a]);}return c;}b=encodeURIComponent(b);b=b.replace(/\!/g,"%21");b=b.replace(/\*/g,"%2A");b=b.replace(/\'/g,"%27");b=b.replace(/\(/g,"%28");b=b.replace(/\)/g,"%29");return b;},decodePercent:function decodePercent(a){if(a!=null){a=a.replace(/\+/g," ");}return decodeURIComponent(a);},getParameterList:function getParameterList(a){if(a==null){return[];}if(typeof a!="object"){return OAuth.decodeForm(a+"");}if(a instanceof Array){return a;}var b=[];for(var c in a){b.push([c,a[c]]);}return b;},getParameterMap:function getParameterMap(b){if(b==null){return{};}if(typeof b!="object"){return OAuth.getParameterMap(OAuth.decodeForm(b+""));}if(b instanceof Array){var d={};for(var c=0;c<b.length;++c){var a=b[c][0];if(d[a]===undefined){d[a]=b[c][1];}}return d;}return b;},getParameter:function getParameter(b,a){if(b instanceof Array){for(var c=0;c<b.length;++c){if(b[c][0]==a){return b[c][1];}}}else{return OAuth.getParameterMap(b)[a];}return null;},formEncode:function formEncode(b){var a="";var d=OAuth.getParameterList(b);for(var e=0;e<d.length;++e){var c=d[e][1];if(c==null){c="";}if(a!=""){a+="&";}a+=OAuth.percentEncode(d[e][0])+"="+OAuth.percentEncode(c);}return a;},decodeForm:function decodeForm(d){var f=[];var h=d.split("&");for(var g=0;g<h.length;++g){var a=h[g];if(a==""){continue;}var c=a.indexOf("=");var b;var e;if(c<0){b=OAuth.decodePercent(a);e=null;}else{b=OAuth.decodePercent(a.substring(0,c));e=OAuth.decodePercent(a.substring(c+1));}f.push([b,e]);}return f;},setParameter:function setParameter(c,a,d){var b=c.parameters;if(b instanceof Array){for(var e=0;e<b.length;++e){if(b[e][0]==a){if(d===undefined){b.splice(e,1);}else{b[e][1]=d;d=undefined;}}}if(d!==undefined){b.push([a,d]);}}else{b=OAuth.getParameterMap(b);b[a]=d;c.parameters=b;}},setParameters:function setParameters(c,b){var d=OAuth.getParameterList(b);for(var a=0;a<d.length;++a){OAuth.setParameter(c,d[a][0],d[a][1]);}},completeRequest:function completeRequest(b,a){if(b.method==null){b.method="GET";}var c=OAuth.getParameterMap(b.parameters);if(c.oauth_consumer_key==null){OAuth.setParameter(b,"oauth_consumer_key",a.consumerKey||"");}if(c.oauth_token==null&&a.token!=null){OAuth.setParameter(b,"oauth_token",a.token);}if(c.oauth_version==null){OAuth.setParameter(b,"oauth_version","1.0");}if(c.oauth_timestamp==null){OAuth.setParameter(b,"oauth_timestamp",OAuth.timestamp());}if(c.oauth_nonce==null){OAuth.setParameter(b,"oauth_nonce",OAuth.nonce(6));}OAuth.SignatureMethod.sign(b,a);},setTimestampAndNonce:function setTimestampAndNonce(a){OAuth.setParameter(a,"oauth_timestamp",OAuth.timestamp());OAuth.setParameter(a,"oauth_nonce",OAuth.nonce(6));},addToURL:function addToURL(a,c){newURL=a;if(c!=null){var b=OAuth.formEncode(c);if(b.length>0){var d=a.indexOf("?");if(d<0){newURL+="?";}else{newURL+="&";}newURL+=b;}}return newURL;},getAuthorizationHeader:function getAuthorizationHeader(a,c){var g='OAuth realm="'+OAuth.percentEncode(a)+'"';var d=OAuth.getParameterList(c);for(var e=0;e<d.length;++e){var f=d[e];var b=f[0];if(b.indexOf("oauth_")==0){g+=","+OAuth.percentEncode(b)+'="'+OAuth.percentEncode(f[1])+'"';}}return g;},correctTimestampFromSrc:function correctTimestampFromSrc(b){b=b||"oauth_timestamp";var a=document.getElementsByTagName("script");if(a==null||!a.length){return;}var e=a[a.length-1].src;if(!e){return;}var d=e.indexOf("?");if(d<0){return;}parameters=OAuth.getParameterMap(OAuth.decodeForm(e.substring(d+1)));var c=parameters[b];if(c==null){return;}OAuth.correctTimestamp(c);},correctTimestamp:function correctTimestamp(a){OAuth.timeCorrectionMsec=(a*1000)-(new Date()).getTime();},timeCorrectionMsec:0,timestamp:function timestamp(){var a=(new Date()).getTime()+OAuth.timeCorrectionMsec;return Math.floor(a/1000);},nonce:function nonce(e){var d=OAuth.nonce.CHARS;var a="";for(var c=0;c<e;++c){var b=Math.floor(Math.random()*d.length);a+=d.substring(b,b+1);}return a;}});OAuth.nonce.CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";OAuth.declareClass=function declareClass(d,a,c){var e=d[a];d[a]=c;if(c!=null&&e!=null){for(var b in e){if(b!="prototype"){c[b]=e[b];}}}return c;};OAuth.declareClass(OAuth,"SignatureMethod",function OAuthSignatureMethod(){});OAuth.setProperties(OAuth.SignatureMethod.prototype,{sign:function sign(c){var b=OAuth.SignatureMethod.getBaseString(c);var a=this.getSignature(b);OAuth.setParameter(c,"oauth_signature",a);return a;},initialize:function initialize(c,a){var b;if(a.accessorSecret!=null&&c.length>9&&c.substring(c.length-9)=="-Accessor"){b=a.accessorSecret;}else{b=a.consumerSecret;}this.key=OAuth.percentEncode(b)+"&"+OAuth.percentEncode(a.tokenSecret);}});OAuth.setProperties(OAuth.SignatureMethod,{sign:function sign(c,a){var b=OAuth.getParameterMap(c.parameters).oauth_signature_method;if(b==null||b==""){b="HMAC-SHA1";OAuth.setParameter(c,"oauth_signature_method",b);}OAuth.SignatureMethod.newMethod(b,a).sign(c);},newMethod:function newMethod(d,a){var c=OAuth.SignatureMethod.REGISTERED[d];if(c!=null){var g=new c();g.initialize(d,a);return g;}var f=new Error("signature_method_rejected");var b="";for(var e in OAuth.SignatureMethod.REGISTERED){if(b!=""){b+="&";}b+=OAuth.percentEncode(e);}f.oauth_acceptable_signature_methods=b;throw f;},REGISTERED:{},registerMethodClass:function registerMethodClass(b,a){for(var c=0;c<b.length;++c){OAuth.SignatureMethod.REGISTERED[b[c]]=a;}},makeSubclass:function makeSubclass(a){var b=OAuth.SignatureMethod;var c=function(){b.call(this);};c.prototype=new b();c.prototype.getSignature=a;c.prototype.constructor=c;return c;},getBaseString:function getBaseString(f){var b=f.action;var g=b.indexOf("?");var e;if(g<0){e=f.parameters;}else{e=OAuth.decodeForm(b.substring(g+1));var d=OAuth.getParameterList(f.parameters);for(var c=0;c<d.length;++c){e.push(d[c]);}}return OAuth.percentEncode(f.method.toUpperCase())+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeUrl(b))+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeParameters(e));},normalizeUrl:function normalizeUrl(c){var d=OAuth.SignatureMethod.parseUri(c);var a=d.protocol.toLowerCase();var f=d.authority.toLowerCase();var g=(a=="http"&&d.port==80)||(a=="https"&&d.port==443);if(g){var b=f.lastIndexOf(":");if(b>=0){f=f.substring(0,b);}}var e=d.path;if(!e){e="/";}return a+"://"+f+e;},parseUri:function parseUri(e){var d={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};var a=d.parser.strict.exec(e);var c={};var b=14;while(b--){c[d.key[b]]=a[b]||"";}return c;},normalizeParameters:function normalizeParameters(d){if(d==null){return"";}var e=OAuth.getParameterList(d);var g=[];for(var f=0;f<e.length;++f){var b=e[f];if(b[0]!="oauth_signature"){g.push([OAuth.percentEncode(b[0])+" "+OAuth.percentEncode(b[1]),b]);}}g.sort(function(j,h){if(j[0]<h[0]){return -1;}if(j[0]>h[0]){return 1;}return 0;});var a=[];for(var c=0;c<g.length;++c){a.push(g[c][1]);}return OAuth.formEncode(a);}});OAuth.SignatureMethod.registerMethodClass(["PLAINTEXT","PLAINTEXT-Accessor"],OAuth.SignatureMethod.makeSubclass(function getSignature(a){return this.key;}));OAuth.SignatureMethod.registerMethodClass(["HMAC-SHA1","HMAC-SHA1-Accessor"],OAuth.SignatureMethod.makeSubclass(function getSignature(b){b64pad="=";var a=b64_hmac_sha1(this.key,b);return a;}));OAuth.correctTimestampFromSrc();var sc;sc.helpers.getRelativeTime=function(e,g,d){var c={now:"Just now",seconds:"sec ago",minute:"min ago",minutes:"min ago",hour:"hr ago",hours:"hr ago",day:"day ago",days:"days ago"};g=sch.defaults(c,g);var a;if(d===true){a=new Date.parse(e);}else{a=new Date(e);}var b=new Date();var f=parseInt((b.getTime()-a.getTime())/1000,10);if(f<10){return g.now;}else{if(f<60){return f.toString()+" "+g.seconds;}else{if(f<120){return"1 "+g.minute;}else{if(f<(45*60)){return Math.round(parseInt(f/60,10)).toString()+" "+g.minutes;}else{if(f<(90*60)){return"1 "+g.hour;}else{if(f<(24*60*60)){if(Math.round(f/3600)===1){return"2 "+g.hours;}else{return Math.round(f/3600).toString()+" "+g.hours;}}else{if(f<(48*60*60)){return"1 "+g.day;}else{return Math.round(f/86400).toString()+" "+g.days;}}}}}}}};sc.helpers.httpTimeToInt=function(b,a){return sc.helpers.dateToInt(b,a);};sc.helpers.dateToInt=function(b,a){var c=new Date();if(a===true){b=new Date.parse(b);}else{b=new Date(b);}c.setTime(b);return c.getTime();};sc.helpers.getTimeAsInt=function(){var a=new Date();return a.getTime();};var sc;sc.helpers.addListener=function(d,e,c,b,a){if(b){sch.warn('scope no longer supported! use a closure or reference "scope" in your event handler');}if(a){sch.warn("use_capture no longer supported!");}sch.debug("listening for "+e);sch.debug("on target nodeName:"+d.nodeName);jQuery(d).bind(e,c);};sc.helpers.removeListener=function(c,d,b,a){sch.debug("removing listener for "+d);sch.debug("on target nodeName:"+c.nodeName);if(a){sch.warn("use_capture no longer supported!");}jQuery(c).unbind(d,b);};sc.helpers.addDelegatedListener=function(d,a,e,c,b){sch.warn('scope no longer supported! use a closure or reference "scope" in your event handler');sch.debug("listening for "+e);sch.debug("on target nodeName:"+target.nodeName);sch.debug("for selector:"+a);jQuery(d).delegate(a,e,c);};sc.helpers.removeDelegatedListener=function(d,a,e,c,b){sch.warn('scope no longer supported! use a closure or reference "scope" in your event handler');jQuery(d).delegate(a,e,c);};sc.helpers.triggerCustomEvent=function(d,c,b,a){sch.error("triggering "+d);sch.error("on target nodeName:"+c.nodeName);sch.error("event data:");if(a){sch.warn("bubble is no longer supported!");}if(b){b=[b];}jQuery(c).trigger(d,b);};sc.helpers.getEventData=function(a){sch.error("getEventData is DEPRECATED. Use second param on event handler");return null;};sc.helpers.listen=sc.helpers.addListener;sc.helpers.unlisten=sc.helpers.removeListener;sc.helpers.delegate=sc.helpers.addDelegatedListener;sc.helpers.undelegate=sc.helpers.removeDelegatedListener;sc.helpers.trigger=sc.helpers.triggerCustomEvent;var sc;sc.helpers.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=sc.helpers.Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64;}else{if(isNaN(f)){d=64;}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d);}return a;},decode:function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h);}if(d!=64){a=a+String.fromCharCode(f);}}a=sc.helpers.Base64._utf8_decode(a);return a;},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d);}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128);}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128);}}}return a;},_utf8_decode:function(a){var d="";var f=0;var h=0,g=0,e=0,b=0;while(f<a.length){h=a.charCodeAt(f);if(h<128){d+=String.fromCharCode(h);f++;}else{if((h>191)&&(h<224)){e=a.charCodeAt(f+1);d+=String.fromCharCode(((h&31)<<6)|(e&63));f+=2;}else{e=a.charCodeAt(f+1);b=a.charCodeAt(f+2);d+=String.fromCharCode(((h&15)<<12)|((e&63)<<6)|(b&63));f+=3;}}}return d;}};sc.helpers.crc32=function(f){function c(j){j=j.replace(/\r\n/g,"\n");var h="";for(var l=0;l<j.length;l++){var k=j.charCodeAt(l);if(k<128){h+=String.fromCharCode(k);}else{if((k>127)&&(k<2048)){h+=String.fromCharCode((k>>6)|192);h+=String.fromCharCode((k&63)|128);}else{h+=String.fromCharCode((k>>12)|224);h+=String.fromCharCode(((k>>6)&63)|128);h+=String.fromCharCode((k&63)|128);}}}return h;}f=c(f);var d="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";if(typeof(crc)=="undefined"){crc=0;}var a=0;var g=0;crc=crc^(-1);for(var b=0,e=f.length;b<e;b++){g=(crc^f.charCodeAt(b))&255;a="0x"+d.substr(g*9,8);crc=(crc>>>8)^a;}return crc^(-1);};sc.helpers.MD5=function(u){function N(b,a){return(b<<a)|(b>>>(32-a));}function M(k,b){var F,a,d,x,c;d=(k&2147483648);x=(b&2147483648);F=(k&1073741824);a=(b&1073741824);c=(k&1073741823)+(b&1073741823);if(F&a){return(c^2147483648^d^x);}if(F|a){if(c&1073741824){return(c^3221225472^d^x);}else{return(c^1073741824^d^x);}}else{return(c^d^x);}}function t(a,c,b){return(a&c)|((~a)&b);}function s(a,c,b){return(a&b)|(c&(~b));}function q(a,c,b){return(a^c^b);}function o(a,c,b){return(c^(a|(~b)));}function w(G,F,ac,ab,k,H,I){G=M(G,M(M(t(F,ac,ab),k),I));return M(N(G,H),F);}function f(G,F,ac,ab,k,H,I){G=M(G,M(M(s(F,ac,ab),k),I));return M(N(G,H),F);}function J(G,F,ac,ab,k,H,I){G=M(G,M(M(q(F,ac,ab),k),I));return M(N(G,H),F);}function v(G,F,ac,ab,k,H,I){G=M(G,M(M(o(F,ac,ab),k),I));return M(N(G,H),F);}function e(k){var G;var d=k.length;var c=d+8;var b=(c-(c%64))/64;var F=(b+1)*16;var H=Array(F-1);var a=0;var x=0;while(x<d){G=(x-(x%4))/4;a=(x%4)*8;H[G]=(H[G]|(k.charCodeAt(x)<<a));x++;}G=(x-(x%4))/4;a=(x%4)*8;H[G]=H[G]|(128<<a);H[F-2]=d<<3;H[F-1]=d>>>29;return H;}function D(c){var b="",d="",k,a;for(a=0;a<=3;a++){k=(c>>>(a*8))&255;d="0"+k.toString(16);b=b+d.substr(d.length-2,2);}return b;}function L(b){b=b.replace(/\r\n/g,"\n");var a="";for(var k=0;k<b.length;k++){var d=b.charCodeAt(k);if(d<128){a+=String.fromCharCode(d);}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128);}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128);}}}return a;}var E=Array();var R,h,K,y,g,aa,Z,Y,X;var U=7,S=12,P=17,O=22;var C=5,B=9,A=14,z=20;var p=4,n=11,m=16,l=23;var W=6,V=10,T=15,Q=21;u=L(u);E=e(u);aa=1732584193;Z=4023233417;Y=2562383102;X=271733878;for(R=0;R<E.length;R+=16){h=aa;K=Z;y=Y;g=X;aa=w(aa,Z,Y,X,E[R+0],U,3614090360);X=w(X,aa,Z,Y,E[R+1],S,3905402710);Y=w(Y,X,aa,Z,E[R+2],P,606105819);Z=w(Z,Y,X,aa,E[R+3],O,3250441966);aa=w(aa,Z,Y,X,E[R+4],U,4118548399);X=w(X,aa,Z,Y,E[R+5],S,1200080426);Y=w(Y,X,aa,Z,E[R+6],P,2821735955);Z=w(Z,Y,X,aa,E[R+7],O,4249261313);aa=w(aa,Z,Y,X,E[R+8],U,1770035416);X=w(X,aa,Z,Y,E[R+9],S,2336552879);Y=w(Y,X,aa,Z,E[R+10],P,4294925233);Z=w(Z,Y,X,aa,E[R+11],O,2304563134);aa=w(aa,Z,Y,X,E[R+12],U,1804603682);X=w(X,aa,Z,Y,E[R+13],S,4254626195);Y=w(Y,X,aa,Z,E[R+14],P,2792965006);Z=w(Z,Y,X,aa,E[R+15],O,1236535329);aa=f(aa,Z,Y,X,E[R+1],C,4129170786);X=f(X,aa,Z,Y,E[R+6],B,3225465664);Y=f(Y,X,aa,Z,E[R+11],A,643717713);Z=f(Z,Y,X,aa,E[R+0],z,3921069994);aa=f(aa,Z,Y,X,E[R+5],C,3593408605);X=f(X,aa,Z,Y,E[R+10],B,38016083);Y=f(Y,X,aa,Z,E[R+15],A,3634488961);Z=f(Z,Y,X,aa,E[R+4],z,3889429448);aa=f(aa,Z,Y,X,E[R+9],C,568446438);X=f(X,aa,Z,Y,E[R+14],B,3275163606);Y=f(Y,X,aa,Z,E[R+3],A,4107603335);Z=f(Z,Y,X,aa,E[R+8],z,1163531501);aa=f(aa,Z,Y,X,E[R+13],C,2850285829);X=f(X,aa,Z,Y,E[R+2],B,4243563512);Y=f(Y,X,aa,Z,E[R+7],A,1735328473);Z=f(Z,Y,X,aa,E[R+12],z,2368359562);aa=J(aa,Z,Y,X,E[R+5],p,4294588738);X=J(X,aa,Z,Y,E[R+8],n,2272392833);Y=J(Y,X,aa,Z,E[R+11],m,1839030562);Z=J(Z,Y,X,aa,E[R+14],l,4259657740);aa=J(aa,Z,Y,X,E[R+1],p,2763975236);X=J(X,aa,Z,Y,E[R+4],n,1272893353);Y=J(Y,X,aa,Z,E[R+7],m,4139469664);Z=J(Z,Y,X,aa,E[R+10],l,3200236656);aa=J(aa,Z,Y,X,E[R+13],p,681279174);X=J(X,aa,Z,Y,E[R+0],n,3936430074);Y=J(Y,X,aa,Z,E[R+3],m,3572445317);Z=J(Z,Y,X,aa,E[R+6],l,76029189);aa=J(aa,Z,Y,X,E[R+9],p,3654602809);X=J(X,aa,Z,Y,E[R+12],n,3873151461);Y=J(Y,X,aa,Z,E[R+15],m,530742520);Z=J(Z,Y,X,aa,E[R+2],l,3299628645);aa=v(aa,Z,Y,X,E[R+0],W,4096336452);X=v(X,aa,Z,Y,E[R+7],V,1126891415);Y=v(Y,X,aa,Z,E[R+14],T,2878612391);Z=v(Z,Y,X,aa,E[R+5],Q,4237533241);aa=v(aa,Z,Y,X,E[R+12],W,1700485571);X=v(X,aa,Z,Y,E[R+3],V,2399980690);Y=v(Y,X,aa,Z,E[R+10],T,4293915773);Z=v(Z,Y,X,aa,E[R+1],Q,2240044497);aa=v(aa,Z,Y,X,E[R+8],W,1873313359);X=v(X,aa,Z,Y,E[R+15],V,4264355552);Y=v(Y,X,aa,Z,E[R+6],T,2734768916);Z=v(Z,Y,X,aa,E[R+13],Q,1309151649);aa=v(aa,Z,Y,X,E[R+4],W,4149444226);X=v(X,aa,Z,Y,E[R+11],V,3174756917);Y=v(Y,X,aa,Z,E[R+2],T,718787259);Z=v(Z,Y,X,aa,E[R+9],Q,3951481745);aa=M(aa,h);Z=M(Z,K);Y=M(Y,y);X=M(X,g);}var j=D(aa)+D(Z)+D(Y)+D(X);return j.toLowerCase();};sc.helpers.SHA1=function(e){function d(A,z){var j=(A<<z)|(A>>>(32-z));return j;}function t(B){var A="";var j;var C;var z;for(j=0;j<=6;j+=2){C=(B>>>(j*4+4))&15;z=(B>>>(j*4))&15;A+=C.toString(16)+z.toString(16);}return A;}function v(B){var A="";var z;var j;for(z=7;z>=0;z--){j=(B>>>(z*4))&15;A+=j.toString(16);}return A;}function b(z){z=z.replace(/\r\n/g,"\n");var j="";for(var B=0;B<z.length;B++){var A=z.charCodeAt(B);if(A<128){j+=String.fromCharCode(A);}else{if((A>127)&&(A<2048)){j+=String.fromCharCode((A>>6)|192);j+=String.fromCharCode((A&63)|128);}else{j+=String.fromCharCode((A>>12)|224);j+=String.fromCharCode(((A>>6)&63)|128);j+=String.fromCharCode((A&63)|128);}}}return j;}var h;var x,w;var c=new Array(80);var n=1732584193;var l=4023233417;var k=2562383102;var g=271733878;var f=3285377520;var u,s,q,p,o;var y;e=b(e);var a=e.length;var m=[];for(x=0;x<a-3;x+=4){w=e.charCodeAt(x)<<24|e.charCodeAt(x+1)<<16|e.charCodeAt(x+2)<<8|e.charCodeAt(x+3);m.push(w);}switch(a%4){case 0:x=2147483648;break;case 1:x=e.charCodeAt(a-1)<<24|8388608;break;case 2:x=e.charCodeAt(a-2)<<24|e.charCodeAt(a-1)<<16|32768;break;case 3:x=e.charCodeAt(a-3)<<24|e.charCodeAt(a-2)<<16|e.charCodeAt(a-1)<<8|128;break;}m.push(x);while((m.length%16)!=14){m.push(0);}m.push(a>>>29);m.push((a<<3)&4294967295);for(h=0;h<m.length;h+=16){for(x=0;x<16;x++){c[x]=m[h+x];}for(x=16;x<=79;x++){c[x]=d(c[x-3]^c[x-8]^c[x-14]^c[x-16],1);}u=n;s=l;q=k;p=g;o=f;for(x=0;x<=19;x++){y=(d(u,5)+((s&q)|(~s&p))+o+c[x]+1518500249)&4294967295;o=p;p=q;q=d(s,30);s=u;u=y;}for(x=20;x<=39;x++){y=(d(u,5)+(s^q^p)+o+c[x]+1859775393)&4294967295;o=p;p=q;q=d(s,30);s=u;u=y;}for(x=40;x<=59;x++){y=(d(u,5)+((s&q)|(s&p)|(q&p))+o+c[x]+2400959708)&4294967295;o=p;p=q;q=d(s,30);s=u;u=y;}for(x=60;x<=79;x++){y=(d(u,5)+(s^q^p)+o+c[x]+3395469782)&4294967295;o=p;p=q;q=d(s,30);s=u;u=y;}n=(n+u)&4294967295;l=(l+s)&4294967295;k=(k+q)&4294967295;g=(g+p)&4294967295;f=(f+o)&4294967295;}y=v(n)+v(l)+v(k)+v(g)+v(f);return y.toLowerCase();};sc.helpers.SHA256=function(q){var l=8;var o=0;function j(s,v){var u=(s&65535)+(v&65535);var t=(s>>16)+(v>>16)+(u>>16);return(t<<16)|(u&65535);}function e(t,s){return(t>>>s)|(t<<(32-s));}function f(t,s){return(t>>>s);}function a(s,u,t){return((s&u)^((~s)&t));}function d(s,u,t){return((s&u)^(s&t)^(u&t));}function g(s){return(e(s,2)^e(s,13)^e(s,22));}function b(s){return(e(s,6)^e(s,11)^e(s,25));}function p(s){return(e(s,7)^e(s,18)^f(s,3));}function k(s){return(e(s,17)^e(s,19)^f(s,10));}function c(t,u){var G=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var v=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];var s=[64];var I,H,F,E,C,A,z,y,x,w;var D,B;t[u>>5]|=128<<(24-u%32);t[((u+64>>9)<<4)+15]=u;for(x=0;x<t.length;x+=16){I=v[0];H=v[1];F=v[2];E=v[3];C=v[4];A=v[5];z=v[6];y=v[7];for(w=0;w<64;w++){if(w<16){s[w]=t[w+x];}else{s[w]=j(j(j(k(s[w-2]),s[w-7]),p(s[w-15])),s[w-16]);}D=j(j(j(j(y,b(C)),a(C,A,z)),G[w]),s[w]);B=j(g(I),d(I,H,F));y=z;z=A;A=C;C=j(E,D);E=F;F=H;H=I;I=j(D,B);}v[0]=j(I,v[0]);v[1]=j(H,v[1]);v[2]=j(F,v[2]);v[3]=j(E,v[3]);v[4]=j(C,v[4]);v[5]=j(A,v[5]);v[6]=j(z,v[6]);v[7]=j(y,v[7]);}return v;}function h(v){var u=Array();var s=(1<<l)-1;for(var t=0;t<v.length*l;t+=l){u[t>>5]|=(v.charCodeAt(t/l)&s)<<(24-t%32);}return u;}function n(t){t=t.replace(/\r\n/g,"\n");var s="";for(var v=0;v<t.length;v++){var u=t.charCodeAt(v);if(u<128){s+=String.fromCharCode(u);}else{if((u>127)&&(u<2048)){s+=String.fromCharCode((u>>6)|192);s+=String.fromCharCode((u&63)|128);}else{s+=String.fromCharCode((u>>12)|224);s+=String.fromCharCode(((u>>6)&63)|128);s+=String.fromCharCode((u&63)|128);}}}return s;}function m(u){var t=o?"0123456789ABCDEF":"0123456789abcdef";var v="";for(var s=0;s<u.length*4;s++){v+=t.charAt((u[s>>2]>>((3-s%4)*8+4))&15)+t.charAt((u[s>>2]>>((3-s%4)*8))&15);}return v;}q=n(q);return m(c(h(q),q.length*l));};sc.helpers.UUID=(function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(b,f){var h=a,e=[],d=Math.random;f=f||h.length;if(b){for(var c=0;c<b;c++){e[c]=h[0|d()*f];}}else{var g;e[8]=e[13]=e[18]=e[23]="-";e[14]="4";for(var c=0;c<36;c++){if(!e[c]){g=0|d()*16;e[c]=h[(c==19)?(g&3)|8:g&15];}}}return e.join("");};})();sc.helpers.isUUID=function(a){return a.match(/^[0-9A-Z]{8}-[0-9A-Z]{4}-[0-9A-Z]{4}-[0-9A-Z]{4}-[0-9A-Z]{12}$/);};var sc,jQuery;sc.helpers.isString=function(a){if(typeof a==="string"){return true;}if(typeof a==="object"&&a!==null){var b=a.constructor.toString().match(/string/i);return(b!==null);}return false;};sc.helpers.isNumber=function(a){return typeof a==="number";};sc.helpers.isArray=function(a){if(!a||!a.constructor){return false;}if(a.constructor.toString().indexOf("Array")===-1){return false;}else{return true;}};sc.helpers.clone=function(a){return _.extend({},a);};sc.helpers.each=function(a,b){};sc.helpers.extend=function(b,a){b.prototype.__proto__=a.prototype;};sc.helpers.defaults=function(c,d){var a=c;for(var b in d){a[b]=d[b];}return a;};var sc;sc.helpers.deJSON=function(b){var a=false;try{var c=JSON.parse(b);a=true;}finally{if(!a){sc.helpers.dump("Could not parse JSON text "+b);}}return c;};sc.helpers.enJSON=function(a){return JSON.stringify(a);};sc.helpers.xml2json=function(f,a){if(!f){return{};}function d(k,j){if(!k){return null;}var n="",m=null,q=null;var p=k.nodeType,s=g(k.localName||k.nodeName);var o=k.text||k.nodeValue||"";if(k.childNodes){if(k.childNodes.length>0){jQuery.each(k.childNodes,function(x,w){var u=w.nodeType,v=g(w.localName||w.nodeName);var t=w.text||w.nodeValue||"";if(u==8){return;}else{if(u==3||u==4||!v){if(t.match(/^\s+$/)){return;}n+=t.replace(/^\s+/,"").replace(/\s+$/,"");}else{m=m||{};if(m[v]){if(!m[v].length){m[v]=c(m[v]);}m[v][m[v].length]=d(w,true);m[v].length=m[v].length;}else{m[v]=d(w);}}}});}}if(k.attributes){if(k.attributes.length>0){q={};m=m||{};jQuery.each(k.attributes,function(v,u){var w=g(u.name),t=u.value;q[w]=t;if(m[w]){if(!m[w].length){m[w]=c(m[w]);}m[w][m[w].length]=t;m[w].length=m[w].length;}else{m[w]=t;}});}}if(m){m=jQuery.extend((n!=""?new String(n):{}),m||{});n=(m.text)?(typeof(m.text)=="object"?m.text:[m.text||""]).concat([n]):n;if(n){m.text=n;}n="";}var l=m||n;if(a){if(n){l={};}n=l.text||n||"";if(n){l.text=n;}if(!j){l=c(l);}}return l;}var g=function(j){return String(j||"").replace(/-/g,"_");};var h=function(j){return(typeof j=="number")||String((j&&typeof j=="string")?j:"").test(/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/);};var c=function(j){if(!j.length){j=[j];}j.length=j.length;return j;};if(typeof f=="string"){f=sc.helpers.createXMLFromString(f);}if(!f.nodeType){return;}if(f.nodeType==3||f.nodeType==4){return f.nodeValue;}var b=(f.nodeType==9)?f.documentElement:f;var e=d(b,true);f=null;b=null;return e;};var sc;sc.helpers.getCurrentLocation=function(){};var sc;sc.helpers.containsScreenName=function(c,b){var a=new RegExp("(?:\\s|\\b|^[[:alnum:]]|^)@("+b+")(?:\\s|\\b|$)","gi");if(a.test(c)){return true;}return false;};sc.helpers.extractScreenNames=function(f,c){var e=/(?:^|\s|\(\[|,|\.|\()@([a-zA-Z0-9_]+)/gi;var d=[];var b=[];while(b=e.exec(f)){for(var a=0;a<b.length;a++){if(!b[a]){b[a]="";}}if(b[1]!=""){d.push(b[1]);}}return d;};sc.helpers.extractURLs=function(f){var b=/(^|\s|\(|:)(((http(s?):\/\/)|(www\.))([\w]+[^\s\)<]+))/gi;var d=[];var c=[];while((d=b.exec(f))!==null){for(var a=0;a<d.length;a++){if(!d[a]){d[a]="";}}var e=d[7].charAt(d[7].length-1);if(e.search(/[\.,;\?]/)!==-1){d[7]=d[7].slice(0,-1);}c.push(d[3]+d[7]);}return c;};sc.helpers.replaceMultiple=function(c,b){for(var a in b){c=c.replace(a,b[a]);}return c;};sc.helpers.autolink=function(g,h,b,c){if(!h){h="both";}var m=/((^|\s)(www\.)?([a-zA-Z_\-]+\.)(com|net|org|uk)($|\s))/gi;var k=/(^|[\s\(:])((http(s?):\/\/)|(www\.))([\w]+[^\s\)<]+)/gi;var n=/(^|\s|\()([a-zA-Z0-9_\.\-\+]+)@([a-zA-Z0-9\-]+)\.([a-zA-Z0-9\-\.]*)([^\s\)<]+)/gi;var j,a,f="";if(h!=="email"){while((a=m.exec(g))){for(j=0;j<a.length;j++){if(!a[j]){a[j]="";}}if(b){b=" "+b;}else{b="";}var d=a[3]+a[4]+a[5];if(c&&c>0&&d.length>c){d=d.substr(0,c)+"...";}var e=a[2]+'<a href="http://'+a[3]+a[4]+a[5]+'"'+b+">"+d+"</a>"+a[6];sch.error(e);g=g.replace(a[0],e);}while((a=k.exec(g))){for(j=0;j<a.length;j++){if(!a[j]){a[j]="";}}if(b){b=" "+b;}else{b="";}var l=a[6].charAt(a[6].length-1);if(l.search(/[\.,;\?]/)!==-1){a[6]=a[6].slice(0,-1);f=l;}var d=a[5]+a[6];if(c&&c>0&&d.length>c){d=d.substr(0,c)+"...";}var e=a[1]+'<a href="http'+a[4]+"://"+a[5]+a[6]+'"'+b+">"+d+"</a>"+f;g=g.replace(a[0],e);}}if(h!=="url"){while((a=n.exec(g))){f="";if(/\./.test(a[5])){f=".";a[5]=a[5].slice(0,-1);}for(j=0;j<a.length;j++){if(!a[j]){a[j]="";}}g=g.replace(a[0],a[1]+'<a href="mailto:'+a[2]+"@"+a[3]+"."+a[4]+a[5]+'">'+a[2]+"@"+a[3]+"."+a[4]+a[5]+"</a>"+f);}}return g;};sc.helpers.autolinkTwitterScreenname=function(f,d){if(!d){d='<a href="http://twitter.com/#username#">@#username#</a>';}var e=/(^|\s|\(\[|,|\.|\()@([a-zA-Z0-9_]+)([^a-zA-Z0-9_]|$)/gi;var c=[];while(c=e.exec(f)){for(var a=0;a<c.length;a++){if(!c[a]){c[a]="";}}var b=d.replace(/#username#/gi,c[2]);f=f.replace(c[0],c[1]+b+c[3]);}return f;};sc.helpers.autolinkTwitterHashtag=function(f,e){if(!e){e='<a href="http://search.twitter.com/search?q=#hashtag_enc#">##hashtag#</a>';}var d=/(^|\s|\()#([a-zA-Z0-9\-_\.+:=]{1,}\w)([^a-zA-Z0-9\-_+]|$)/gi;var c=[];while(c=d.exec(f)){for(var a=0;a<c.length;a++){if(!c[a]){c[a]="";}}var b=e.replace(/#hashtag#/gi,c[2]);b=b.replace(/#hashtag_enc#/gi,encodeURIComponent(c[2]));f=f.replace(c[0],c[1]+b+c[3]);}return f;};sc.helpers.makeClickable=function(g,e){var a,c,f,b,d;if(!e){e={};}if(e.autolink){var a=e.autolink.type||null;var c=e.autolink.extra_code||null;var f=e.autolink.maxlen||null;}if(e.screenname){var b=e.screenname.tpl||null;}if(e.hashtag){var d=e.hashtag.tpl||null;}g=sc.helpers.autolink(g,a,c,f);g=sc.helpers.autolinkTwitterScreenname(g,b);g=sc.helpers.autolinkTwitterHashtag(g,d);return g;};sc.helpers.stripTags=function(b){var a=/<[^>]*>/gim;b=b.replace(a,"");return b;};sc.helpers.fromHTMLSpecialChars=function(a){a=a.replace(/&lt;/gi,"<");sc.helpers.dump(a);a=a.replace(/&gt;/gi,">");sc.helpers.dump(a);a=a.replace(/&quot;/gi,'"');sc.helpers.dump(a);a=a.replace(/&apos;/gi,"'");sc.helpers.dump(a);a=a.replace(/&amp;/gi,"&");sc.helpers.dump(a);return a;};sc.helpers.escape_html=function(a){return sc.helpers.htmlspecialchars(a,"ENT_QUOTES");};sc.helpers.htmlspecialchars=function(b,f){var e={},d="",a="",c=0;a=b.toString();if(false===(e=sc.helpers._get_html_translation_table("HTML_SPECIALCHARS",f))){return false;}a=a.split("&").join(e["&"]);for(d in e){if(d!="&"){entity=e[d];a=a.split(d).join(entity);}}return a;};sc.helpers.htmlentities=function(c,f){var e={},d="",a="",b="";a=c.toString();if(false===(e=sc.helpers._get_html_translation_table("HTML_ENTITIES",f))){return false;}for(d in e){b=e[d];a=a.split(d).join(b);}return a;};sc.helpers._get_html_translation_table=function(j,f){var d={},h={},c=0,a="";var e={},b={};var k={},g={};k=(j?j.toUpperCase():"HTML_SPECIALCHARS");g=(f?f.toUpperCase():"ENT_COMPAT");e[0]="HTML_SPECIALCHARS";e[1]="HTML_ENTITIES";b[0]="ENT_NOQUOTES";b[2]="ENT_COMPAT";b[3]="ENT_QUOTES";if(!isNaN(k)){k=e[k];}if(!isNaN(g)){g=b[g];}if(k==="HTML_SPECIALCHARS"){d["38"]="&amp;";if(g!=="ENT_NOQUOTES"){d["34"]="&quot;";}if(g==="ENT_QUOTES"){d["39"]="&#039;";}d["60"]="&lt;";d["62"]="&gt;";}else{if(k==="HTML_ENTITIES"){d["38"]="&amp;";if(g!=="ENT_NOQUOTES"){d["34"]="&quot;";}if(g==="ENT_QUOTES"){d["39"]="&#039;";}d["60"]="&lt;";d["62"]="&gt;";d["160"]="&nbsp;";d["161"]="&iexcl;";d["162"]="&cent;";d["163"]="&pound;";d["164"]="&curren;";d["165"]="&yen;";d["166"]="&brvbar;";d["167"]="&sect;";d["168"]="&uml;";d["169"]="&copy;";d["170"]="&ordf;";d["171"]="&laquo;";d["172"]="&not;";d["173"]="&shy;";d["174"]="&reg;";d["175"]="&macr;";d["176"]="&deg;";d["177"]="&plusmn;";d["178"]="&sup2;";d["179"]="&sup3;";d["180"]="&acute;";d["181"]="&micro;";d["182"]="&para;";d["183"]="&middot;";d["184"]="&cedil;";d["185"]="&sup1;";d["186"]="&ordm;";d["187"]="&raquo;";d["188"]="&frac14;";d["189"]="&frac12;";d["190"]="&frac34;";d["191"]="&iquest;";d["192"]="&Agrave;";d["193"]="&Aacute;";d["194"]="&Acirc;";d["195"]="&Atilde;";d["196"]="&Auml;";d["197"]="&Aring;";d["198"]="&AElig;";d["199"]="&Ccedil;";d["200"]="&Egrave;";d["201"]="&Eacute;";d["202"]="&Ecirc;";d["203"]="&Euml;";d["204"]="&Igrave;";d["205"]="&Iacute;";d["206"]="&Icirc;";d["207"]="&Iuml;";d["208"]="&ETH;";d["209"]="&Ntilde;";d["210"]="&Ograve;";d["211"]="&Oacute;";d["212"]="&Ocirc;";d["213"]="&Otilde;";d["214"]="&Ouml;";d["215"]="&times;";d["216"]="&Oslash;";d["217"]="&Ugrave;";d["218"]="&Uacute;";d["219"]="&Ucirc;";d["220"]="&Uuml;";d["221"]="&Yacute;";d["222"]="&THORN;";d["223"]="&szlig;";d["224"]="&agrave;";d["225"]="&aacute;";d["226"]="&acirc;";d["227"]="&atilde;";d["228"]="&auml;";d["229"]="&aring;";d["230"]="&aelig;";d["231"]="&ccedil;";d["232"]="&egrave;";d["233"]="&eacute;";d["234"]="&ecirc;";d["235"]="&euml;";d["236"]="&igrave;";d["237"]="&iacute;";d["238"]="&icirc;";d["239"]="&iuml;";d["240"]="&eth;";d["241"]="&ntilde;";d["242"]="&ograve;";d["243"]="&oacute;";d["244"]="&ocirc;";d["245"]="&otilde;";d["246"]="&ouml;";d["247"]="&divide;";d["248"]="&oslash;";d["249"]="&ugrave;";d["250"]="&uacute;";d["251"]="&ucirc;";d["252"]="&uuml;";d["253"]="&yacute;";d["254"]="&thorn;";d["255"]="&yuml;";}else{throw Error("Table: "+k+" not supported");}}for(c in d){a=String.fromCharCode(c);h[a]=d[c];}return h;};sc.helpers.Utf8={encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d);}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128);}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128);}}}return a;},decode:function(a){var d="";var f=0;var h=0,g=0,e=0,b=0;while(f<a.length){h=a.charCodeAt(f);if(h<128){d+=String.fromCharCode(h);f++;}else{if((h>191)&&(h<224)){e=a.charCodeAt(f+1);d+=String.fromCharCode(((h&31)<<6)|(e&63));f+=2;}else{e=a.charCodeAt(f+1);b=a.charCodeAt(f+2);d+=String.fromCharCode(((h&15)<<12)|((e&63)<<6)|(b&63));f+=3;}}}return d;}};sc.helpers.trim=function(b,a){return sc.helpers.ltrim(sc.helpers.rtrim(b,a),a);};sc.helpers.ltrim=function(b,a){a=a||"\\s";return b.replace(new RegExp("^["+a+"]+","g"),"");};sc.helpers.rtrim=function(b,a){a=a||"\\s";return b.replace(new RegExp("["+a+"]+$","g"),"");};sc.helpers.pad=function(c,g,f,d){var e="",a;var b=function(k,h){var l="",j;while(l.length<h){l+=k;}l=l.substr(0,h);return l;};c+="";f=f!==undefined?f:" ";if(d!="STR_PAD_LEFT"&&d!="STR_PAD_RIGHT"&&d!="STR_PAD_BOTH"){d="STR_PAD_RIGHT";}if((a=g-c.length)>0){if(d=="STR_PAD_LEFT"){c=b(f,a)+c;}else{if(d=="STR_PAD_RIGHT"){c=c+b(f,a);}else{if(d=="STR_PAD_BOTH"){e=b(f,Math.ceil(a/2));c=e+c+e;c=c.substr(0,g);}}}}return c;};sc.helpers.nl2br=function(b,a){a=a||"<br>";b=b.replace(/(\r\n|\n\r|\r|\n)/g,a+"$1");return b;};var sc;var SPAZCORE_PLATFORM_AIR="AIR";var SPAZCORE_PLATFORM_WEBOS="webOS";var SPAZCORE_PLATFORM_TITANIUM="Titanium";var SPAZCORE_PLATFORM_UNKNOWN="__UNKNOWN";var SPAZCORE_OS_WINDOWS="Windows";var SPAZCORE_OS_LINUX="Linux";var SPAZCORE_OS_MACOS="MacOS";var SPAZCORE_OS_UNKNOWN="__OS_UNKNOWN";var SPAZCORE_DUMPLEVEL_DEBUG=4;var SPAZCORE_DUMPLEVEL_NOTICE=3;var SPAZCORE_DUMPLEVEL_WARNING=2;var SPAZCORE_DUMPLEVEL_ERROR=1;var SPAZCORE_DUMPLEVEL_NONE=0;sc.helpers.getPlatform=function(){if(window.runtime){return SPAZCORE_PLATFORM_AIR;}if(window.Mojo){return SPAZCORE_PLATFORM_WEBOS;}if(window.Titanium){return SPAZCORE_PLATFORM_TITANIUM;}return SPAZCORE_PLATFORM_UNKNOWN;};sc.helpers.isPlatform=function(b){var a=sc.helpers.getPlatform();if(a.toLowerCase()===b.toLowerCase()){return true;}else{return false;}};sc.helpers.isAIR=function(){return sc.helpers.isPlatform(SPAZCORE_PLATFORM_AIR);};sc.helpers.iswebOS=function(){return sc.helpers.isPlatform(SPAZCORE_PLATFORM_WEBOS);};sc.helpers.isTitanium=function(){return sc.helpers.isPlatform(SPAZCORE_PLATFORM_TITANIUM);};sc.helpers.debug=function(a){sc.helpers.dump(a,SPAZCORE_DUMPLEVEL_DEBUG);};sc.helpers.note=function(a){sc.helpers.dump(a,SPAZCORE_DUMPLEVEL_NOTICE);};sc.helpers.warn=function(a){sc.helpers.dump(a,SPAZCORE_DUMPLEVEL_WARNING);};sc.helpers.error=function(a){sc.helpers.dump(a,SPAZCORE_DUMPLEVEL_ERROR);};sc.helpers.dump=function(a,b){console.log(a);};sc.helpers.openInBrowser=function(a){window.open(a);};sc.helpers.getAppVersion=function(){};sc.helpers.getUserAgent=function(){};sc.helpers.setUserAgent=function(a){};sc.helpers.getClipboardText=function(){};sc.helpers.setClipboardText=function(a){};sc.helpers.getEncryptedValue=function(a){};sc.helpers.setEncryptedValue=function(a,b){};sc.helpers.getAppStoreDir=function(){};sc.helpers.getPreferencesFile=function(a,b){};sc.helpers.init_file=function(b,a){};sc.helpers.getOS=function(){return SPAZCORE_OS_UNKNOWN;};sc.helpers.isOS=function(b){var a=sc.helpers.getOS();if(a===b){return true;}return false;};sc.helpers.isWindows=function(){return sc.helpers.isOS(SPAZCORE_OS_WINDOWS);};sc.helpers.isLinux=function(){return sc.helpers.isOS(SPAZCORE_OS_LINUX);};sc.helpers.isMacOS=function(){return sc.helpers.isOS(SPAZCORE_OS_MACOS);};var sc,jQuery;sc.helpers.removeExtraElements=function(d,c,a){if(!a){a=false;}var b=jQuery(d);var e=b.parent().get(0);var f=b.length-c;sch.debug("removing extra elements from "+d);sch.debug("matching item count "+b.length);sch.debug("max_items: "+c);sch.debug("diff: "+f);sch.debug("remove_from_top: "+a);if(f>0){if(!a){b.slice(f*-1).each(function(){this.parentNode.removeChild(this);});}else{b.slice(f).each(function(){this.parentNode.removeChild(this);});}}};sc.helpers.removeDuplicateElements=function(b,a){sc.helpers.dump("removeDuplicateElements TODO");};sc.helpers.updateRelativeTimes=function(b,a){jQuery(b).each(function(d){var e=jQuery(this).attr(a);var c=sc.helpers.getRelativeTime(e);jQuery(this).html(c);});};sc.helpers.markAllAsRead=function(a){jQuery(a).removeClass("new");};var sc,DOMParser;sc.helpers.createXMLFromString=function(a){var b,d;try{b=new DOMParser();d=b.parseFromString(a,"text/xml");return d;}catch(c){sc.helpers.dump(c.name+":"+c.message);return null;}};var SPAZCORE_ACCOUNT_TWITTER="twitter";var SPAZCORE_ACCOUNT_IDENTICA="identi.ca";var SPAZCORE_ACCOUNT_STATUSNET="StatusNet";var SPAZCORE_ACCOUNT_FLICKR="flickr";var SPAZCORE_ACCOUNT_WORDPRESS="wordpress.com";var SPAZCORE_ACCOUNT_WORDPRESS_TWITTER="wordpress-twitter";var SPAZCORE_ACCOUNT_TUMBLR="tumblr";var SPAZCORE_ACCOUNT_TUMBLR_TWITTER="tumblr-twitter";var SPAZCORE_ACCOUNT_FACEBOOK="facebook";var SPAZCORE_ACCOUNT_FRIENDFEED="friendfeed";var SPAZCORE_ACCOUNT_CUSTOM="custom";var SpazAccounts=function(a){if(a){this.prefs=a;}else{this.prefs=new SpazPrefs();this.prefs.load();}this.load();};SpazAccounts.prototype.prefskey="users";SpazAccounts.prototype.load=function(){var a=this.prefs.get(this.prefskey);sch.debug("accjson:'"+a+"'");try{this._accounts=sch.deJSON(this.prefs.get(this.prefskey));}catch(b){sch.error(b.message);this._accounts=[];}if(!sch.isArray(this._accounts)){this._accounts=[];}sch.debug("this._accounts:'"+this._accounts+"'");};SpazAccounts.prototype.save=function(){this.prefs.set(this.prefskey,sch.enJSON(this._accounts));sch.debug('saved users to "'+this.prefskey+'" pref');for(var a in this._accounts){sch.debug(this._accounts[a].id);}sch.debug("THE ACCOUNTS:");sch.debug(sch.enJSON(this._accounts));sch.debug("ALL PREFS:");sch.debug(sch.enJSON(this.prefs._prefs));};SpazAccounts.prototype.getAll=function(){return this._accounts;};SpazAccounts.prototype.setAll=function(b){this._accounts=b;this.save();sch.debug("Saved these accounts:");for(var a=0;a<this._accounts.length;a++){sch.debug(this._accounts[a].id);}};SpazAccounts.prototype.update=function(d,a){var c=this.get(d);if(c){var b=sch.defaults(c,a);return this.get(d);}else{sch.error('No account with id "'+d+'" exists');return null;}};SpazAccounts.prototype.initAccounts=function(){this._accounts=[];this.save();};SpazAccounts.prototype.add=function(d,b,a){if(!a){sch.error("Type must be set");return false;}var c={id:this.generateID(),type:a,auth:b,username:d,meta:{}};this._accounts.push(c);this.save();return c;};SpazAccounts.prototype.remove=function(c){sch.error("Deleting '"+c+"'");var b=this._findUserIndex(c);if(b!==false){var a=this._accounts.splice(b,1);sch.debug("Deleted account '"+a[0].id+"'");this.save();return a[0];}else{sch.error("Could not find this id to delete: '"+c+"'");return false;}};SpazAccounts.prototype.getByType=function(b){var c=[];for(var a=0;a<this._accounts.length;a++){if(this._accounts[a].type===b){c.push(this._accounts[a]);}}return c;};SpazAccounts.prototype.getByUsername=function(c){var b=[];for(var a=0;a<this._accounts.length;a++){if(this._accounts[a].username===c){b.push(this._accounts[a]);}}return b;};SpazAccounts.prototype.getByUsernameAndType=function(d,b){var c=[];for(var a=0;a<this._accounts.length;a++){if(this._accounts[a].username===d&&this._accounts[a].type===b){c.push(this._accounts[a]);}}return c;};SpazAccounts.prototype.get=function(b){var a=this._findUserIndex(b);if(a!==false){return this._accounts[i];}return false;};SpazAccounts.prototype._findUserIndex=function(a){for(i=0;i<this._accounts.length;i++){if(this._accounts[i].id===a){sch.debug("Found matching user record to "+a);return i;}}return false;};SpazAccounts.prototype.generateID=function(){var a=sc.helpers.UUID();return a;};SpazAccounts.prototype.getMeta=function(b,a){if((user=this.get(b))){if(user.meta&&user.meta[a]!==null){return user.meta[a];}}return null;};SpazAccounts.prototype.setMeta=function(d,b,c){var a=this._findUserIndex(d);if(a!==false){if(!this._accounts[a].meta){this._accounts[a].meta={};}this._accounts[a].meta[b]=c;this.save();return this._accounts[a].meta[b];}return null;};var SPAZCORE_AUTHTYPE_BASIC="basic";var SPAZCORE_AUTHTYPE_OAUTH="oauth";var SPAZAUTH_SERVICES={};SPAZAUTH_SERVICES[SPAZCORE_ACCOUNT_STATUSNET]={authType:SPAZCORE_AUTHTYPE_BASIC};SPAZAUTH_SERVICES[SPAZCORE_ACCOUNT_TUMBLR_TWITTER]={authType:SPAZCORE_AUTHTYPE_BASIC};SPAZAUTH_SERVICES[SPAZCORE_ACCOUNT_WORDPRESS_TWITTER]={authType:SPAZCORE_AUTHTYPE_BASIC};SPAZAUTH_SERVICES[SPAZCORE_ACCOUNT_IDENTICA]={authType:SPAZCORE_AUTHTYPE_BASIC};SPAZAUTH_SERVICES[SPAZCORE_ACCOUNT_CUSTOM]={authType:SPAZCORE_AUTHTYPE_BASIC};SPAZAUTH_SERVICES["default"]={authType:SPAZCORE_AUTHTYPE_BASIC};function SpazAuth(a){var b=SPAZAUTH_SERVICES[a];if(b==undefined){sch.error("Invalid authentication service: "+a);return null;}switch(b.authType){case SPAZCORE_AUTHTYPE_OAUTH:return new SpazOAuth(a,b);case SPAZCORE_AUTHTYPE_BASIC:return new SpazBasicAuth();default:return new SpazBasicAuth();}}SpazAuth.addService=function(a,b){SPAZAUTH_SERVICES[a]=b;};function SpazBasicAuth(){}SpazBasicAuth.prototype.authorize=function(c,a,b){this.username=c;this.password=a;this.authHeader="Basic "+sc.helpers.Base64.encode(c+":"+a);if(b){b.call(this,true);}return true;};SpazBasicAuth.prototype.signRequest=function(){return this.authHeader;};SpazBasicAuth.prototype.load=function(b){var a=b.split(":",2);if(a.length!=2){sch.error("Invalid basic auth pickle: "+b);return false;}this.authorize(a[0],a[1]);return true;};SpazBasicAuth.prototype.save=function(){return this.username+":"+this.password;};SpazBasicAuth.prototype.getUsername=function(){return this.username;};SpazBasicAuth.prototype.getPassword=function(){return this.password;};function SpazOAuth(a,b){this.realm=a;this.opts=b;}SpazOAuth.prototype.authorize=function(g,c,f){var e=this;var a=false;this.username=g;var d={x_auth_username:g,x_auth_password:c,x_auth_mode:"client_auth"};OAuth.completeRequest({method:"post",action:this.opts.accessURL,parameters:d},this.opts);if(f){a=true;}var b=null;jQuery.ajax({async:a,type:"post",url:this.opts.accessURL,data:d,dataType:"text",success:function(j,l,k){sch.error(k);sch.error("xhr.responseText:"+k.responseText);sch.error("xhr.responseXML:"+k.responseXML);sch.error("getAllResponseHeaders:n"+k.getAllResponseHeaders());sch.error("OAuth Data return");sch.error(sch.enJSON(j));var h=OAuth.decodeForm(j);sch.error("results");sch.error(sch.enJSON(h));b={};b.key=OAuth.getParameter(h,"oauth_token");b.secret=OAuth.getParameter(h,"oauth_token_secret");e.setAccessToken(b.key,b.secret);if(f){f.call(this,true,b);}},error:function(j,k,h){sch.error("Failed to fetch oAuth access token: "+j.responseText);if(f){f.call(this,false);}},complete:function(h,j){sch.error("COMPLETE:");sch.error("xhr.responseText:"+h.responseText);sch.error("xhr.responseXML:"+h.responseXML);sch.error("getAllResponseHeaders:n"+h.getAllResponseHeaders());},beforeSend:function(h){h.setRequestHeader("Accept-Encoding","none");}});if(a!==true){if(b!=null){return true;}else{return false;}}else{return null;}};SpazOAuth.prototype.setAccessToken=function(b,a){this.accessToken={key:b,secret:a};this.signingCredentials={consumerKey:this.opts.consumerKey,consumerSecret:this.opts.consumerSecret,token:b,tokenSecret:a};};SpazOAuth.prototype.signRequest=function(d,a,b){var c=jQuery.extend({},b);OAuth.completeRequest({method:d,action:a,parameters:c},this.signingCredentials);return OAuth.getAuthorizationHeader(this.realm,c);};SpazOAuth.prototype.load=function(b){var a=b.split(":",3);if(a.length!=3){sch.error("Invalid oauth pickle: "+b);return false;}this.username=a[0];this.setAccessToken(a[1],a[2]);return true;};SpazOAuth.prototype.save=function(){return this.username+":"+this.accessToken.key+":"+this.accessToken.secret;};var SpazFilterChain=function(b){b=sch.defaults({filters:null},b);this._filters=[];if(b.filters){for(var a=0;a<b.filters.length;a++){this.addFilter(b.filters[a].label,b.filters[a].func);}}};SpazFilterChain.prototype.addFilter=function(c,d,a){var b={label:c,func:d};if(a){this._filters.splice(a,0,b);}else{this._filters.push(b);}sch.debug('added filter "'+c+'"');};SpazFilterChain.prototype.removeFilter=function(a){var b=this.getFilterIndex(a);var c=this._filters.splice(b,1);sch.debug('removed filter "'+a+'": '+c);};SpazFilterChain.prototype.nukeFilters=function(){this._filters=[];sch.debug("filters nuked");};SpazFilterChain.prototype.makeFilterFirst=function(a){var b=this.getFilterIndex(a);if(b!==0){var c=this._filters.splice(b,1);this._filters.unshift(c);}};SpazFilterChain.prototype.makeFilterLast=function(a){var b=this.getFilterIndex(a);if(b!==(this._filters.langth-1)){var c=this._filters.splice(b,1);this._filters.push(c);}};SpazFilterChain.prototype.getFilterList=function(){var a=[];for(var b=0;b<this._filters.length;b++){a.push(this._filters[b].label);}return a;};SpazFilterChain.prototype.process=function(b){var a;for(var c=0;c<this._filters.length;c++){a=this._filters[c];sch.debug("Calling filter "+a.label);b=a.func(b);}return b;};SpazFilterChain.prototype.processArray=function(c){var b;for(var d=0;d<c.length;d++){for(var a=0;a<this._filters.length;a++){b=this._filters[a];sch.debug("Calling filter "+b.label);c[d]=b.func(c[d]);if(c[d]===null){break;}}}c=_.compact(c);return c;};SpazFilterChain.prototype.getFilterIndex=function(a){for(var b=0;b<this._filters.length;b++){if(this._filters[b].label===a){return b;}}return false;};function SpazImageURL(a){this.apis={};this.initAPIs();}SpazImageURL.prototype.initAPIs=function(){this.addAPI("drippic",{url_regex:new RegExp("http://drippic.com/([a-zA-Z0-9]+)","gi"),getThumbnailUrl:function(b){var a="http://drippic.com/drippic/show/thumb/"+b;return a;},getImageUrl:function(b){var a="http://drippic.com/drippic/show/full/"+b;return a;}});this.addAPI("twitpic",{url_regex:new RegExp("http://twitpic.com/([a-zA-Z0-9]+)","gi"),getThumbnailUrl:function(b){var a="http://twitpic.com/show/thumb/"+b;return a;},getImageUrl:function(b){var a="http://twitpic.com/show/large/"+b;return a;}});this.addAPI("yfrog",{url_regex:new RegExp("http://yfrog.(?:com|us)/([a-zA-Z0-9]+)","gim"),getThumbnailUrl:function(b){var a="http://yfrog.com/"+b+".th.jpg";return a;},getImageUrl:function(b){var a="http://yfrog.com/"+b+":iphone";return a;}});this.addAPI("twitgoo",{url_regex:/http:\/\/twitgoo.com\/([a-zA-Z0-9]+)/gi,getThumbnailUrl:function(b){var a="http://twitgoo.com/show/thumb/"+b;return a;},getImageUrl:function(b){var a="http://twitgoo.com/show/img/"+b;return a;}});this.addAPI("pikchur",{url_regex:/http:\/\/(?:pikchur\.com|pk\.gd)\/([a-zA-Z0-9]+)/gi,getThumbnailUrl:function(b){var a="http://img.pikchur.com/pic_"+b+"_s.jpg";return a;},getImageUrl:function(b){var a="http://img.pikchur.com/pic_"+b+"_l.jpg";return a;}});this.addAPI("tweetphoto",{url_regex:/http:\/\/tweetphoto.com\/([a-zA-Z0-9]+)/gi,getThumbnailUrl:function(b){var a="http://TweetPhotoAPI.com/api/TPAPI.svc/imagefromurl?size=thumbnail&url=http://tweetphoto.com/"+b;return a;},getImageUrl:function(b){var a="http://TweetPhotoAPI.com/api/TPAPI.svc/imagefromurl?size=big&url=http://tweetphoto.com/"+b;return a;}});this.addAPI("pic.gd",{url_regex:/http:\/\/pic.gd\/([a-zA-Z0-9]+)/gi,getThumbnailUrl:function(b){var a="http://TweetPhotoAPI.com/api/TPAPI.svc/imagefromurl?size=thumbnail&url=http://pic.gd/"+b;return a;},getImageUrl:function(b){var a="http://TweetPhotoAPI.com/api/TPAPI.svc/imagefromurl?size=big&url=http://pic.gd/"+b;return a;}});};SpazImageURL.prototype.getAPIs=function(){return this.apis;};SpazImageURL.prototype.getAPI=function(a){return this.apis[a];};SpazImageURL.prototype.addAPI=function(c,b){var a={};a.url_regex=b.url_regex;a.getThumbnailUrl=b.getThumbnailUrl;a.getImageUrl=b.getImageUrl;this.apis[c]=a;};SpazImageURL.prototype.findServiceUrlsInString=function(e){var d={},b=0,c,a,f;for(a in this.apis){f=this.getAPI(a);sch.dump(a);sch.dump(f.url_regex);while((c=f.url_regex.exec(sch.trim(e)))!=null){sch.dump(c);d[a]=c;b++;}}sch.dump("num_matches:"+b);sch.dump(d);if(b>0){return d;}else{return null;}};SpazImageURL.prototype.getThumbsForMatches=function(f){var b,a,e,d,g={},c=0;for(a in f){sch.dump("SERVICE:"+a);e=this.getAPI(a);urls=f[a];sch.dump("URLS:"+urls);g[urls[0]]=e.getThumbnailUrl(urls[1]);c++;}sch.dump("num_urls:"+c);sch.dump(g);if(c>0){return g;}else{return null;}};SpazImageURL.prototype.getThumbsForUrls=function(b){var a=this.findServiceUrlsInString(b);if(a){return this.getThumbsForMatches(a);}else{return null;}};SpazImageURL.prototype.getThumbForUrl=function(a){var b=this.getThumbsForUrls(a);if(b){return b[a];}else{return null;}};SpazImageURL.prototype.getImagesForMatches=function(g){var b,a,e,f,d={},c=0;for(a in g){sch.dump("SERVICE:"+a);e=this.getAPI(a);urls=g[a];sch.dump("URLS:"+urls);d[urls[0]]=e.getImageUrl(urls[1]);c++;}sch.dump("num_urls:"+c);sch.dump(d);if(c>0){return d;}else{return null;}};SpazImageURL.prototype.getImagesForUrls=function(b){var a=this.findServiceUrlsInString(b);if(a){return this.getImagesForMatches(a);}else{return null;}};SpazImageURL.prototype.getImageForUrl=function(a){var b=this.getImagesForUrls(a);if(b){return b[a];}else{return null;}};var sc,DOMParser,jQuery;var SpazImageUploader=function(a){if(a){this.setOpts(a);}};SpazImageUploader.prototype.setOpts=function(a){this.opts=sch.defaults({extra:{},auth_obj:null,username:null,password:null,auth_method:"echo",statusnet_api_base:null},a);};SpazImageUploader.prototype.getServiceLabels=function(){var b=[];for(var a in this.services){b.push(a);}return b;};SpazImageUploader.prototype.services={drippic:{url:"http://drippic.com/drippic2/upload",parseResponse:function(d){var f=new DOMParser();xmldoc=f.parseFromString(d,"text/xml");var a;var e=xmldoc.getElementsByTagName("rsp")[0].attributes;a=e.getNamedItem("stat").nodeValue;if(a=="ok"){var b=$(xmldoc).find("mediaurl").text();return{url:b};}else{var c;if(xmldoc.getElementsByTagName("err")[0]){c=xmldoc.getElementsByTagName("err")[0].childNodes[0].nodeValue;}else{c=xmldoc.getElementsByTagName("error")[0].childNodes[0].nodeValue;}sch.error(c);return{error:c};}}},pikchur:{url:"http://api.pikchur.com/simple/upload",extra:{api_key:"MzTrvEd/uPNjGDabr539FA",source:"NjMw"},parseResponse:function(d){var f=new DOMParser();xmldoc=f.parseFromString(d,"text/xml");var a;var e=xmldoc.getElementsByTagName("rsp")[0].attributes;if(e.getNamedItem("status")){a=e.getNamedItem("status").nodeValue;}else{if(e.getNamedItem("stat")){a=e.getNamedItem("stat").nodeValue;}else{a="fuck I wish they would use the same goddamn nodenames";}}if(a=="ok"){var b=$(xmldoc).find("mediaurl").text();return{url:b};}else{var c;if(xmldoc.getElementsByTagName("err")[0]){c=xmldoc.getElementsByTagName("err")[0].attributes;}else{c=xmldoc.getElementsByTagName("error")[0].attributes;}sch.error(c);errMsg=c.getNamedItem("msg").nodeValue;sch.error(errMsg);return{error:errMsg};}}},twitpic:{url:"http://api.twitpic.com/2/upload.json",extra:{key:"3d8f511397248dc913193a6195c4a018"},parseResponse:function(a){if(sch.isString(a)){a=sch.deJSON(a);}if(a.url){return{url:a.url};}else{return{error:"unknown error"};}}},twitgoo:{url:"http://twitgoo.com/api/upload",extra:{format:"xml",source:"Spaz",source_url:"http://getspaz.com"},parseResponse:function(d){var f=new DOMParser();xmldoc=f.parseFromString(d,"text/xml");var a;var e=xmldoc.getElementsByTagName("rsp")[0].attributes;a=e.getNamedItem("status").nodeValue;if(a=="ok"){var b=$(xmldoc).find("mediaurl").text();return{url:b};}else{var c;if(xmldoc.getElementsByTagName("err")[0]){c=xmldoc.getElementsByTagName("err")[0].attributes;}else{c=xmldoc.getElementsByTagName("error")[0].attributes;}sch.error(c);errMsg=c.getNamedItem("msg").nodeValue;sch.error(errMsg);return{error:errMsg};}}},"identi.ca":{url:"http://identi.ca/api/statusnet/media/upload",parseResponse:function(d){var f=new DOMParser();xmldoc=f.parseFromString(d,"text/xml");var a;var e=xmldoc.getElementsByTagName("rsp")[0].attributes;a=e.getNamedItem("stat").nodeValue;if(a=="ok"){var b=$(xmldoc).find("mediaurl").text();return{url:b};}else{var c;if(xmldoc.getElementsByTagName("err")[0]){c=xmldoc.getElementsByTagName("err")[0].childNodes[0].nodeValue;}else{c=xmldoc.getElementsByTagName("error")[0].childNodes[0].nodeValue;}sch.error(c);return{error:c};}}},statusnet:{url:"/statusnet/media/upload",prepForUpload:function(){if(this.opts.statusnet_api_base){this.services.statusnet.url=this.opts.statusnet_api_base+this.services.statusnet.url;}else{sch.error("opts.statusnet_api_base must be set to use statusnet uploader service");}},parseResponse:function(d){var f=new DOMParser();xmldoc=f.parseFromString(d,"text/xml");var a;var e=xmldoc.getElementsByTagName("rsp")[0].attributes;a=e.getNamedItem("stat").nodeValue;if(a=="ok"){var b=$(xmldoc).find("mediaurl").text();return{url:b};}else{var c;if(xmldoc.getElementsByTagName("err")[0]){c=xmldoc.getElementsByTagName("err")[0].childNodes[0].nodeValue;}else{c=xmldoc.getElementsByTagName("error")[0].childNodes[0].nodeValue;}sch.error(c);return{error:c};}}}};SpazImageUploader.prototype.getAuthHeader=function(){var e=sch.defaults({getEchoHeaderOpts:{}},this.opts);var d;var a=e.username;var c=e.password;if(e.auth_method==="echo"){var b=new SpazTwit({auth:e.auth_obj});d=b.getEchoHeader(e.getEchoHeaderOpts);}else{d=e.auth_obj.signRequest();}sch.error(d);return d;};SpazImageUploader.prototype.upload=function(){var d=sch.defaults({extra:{}},this.opts);var c=this.services[d.service];if(c.prepForUpload){c.prepForUpload.call(this);}d.url=c.url;if(c.extra){d.extra=jQuery.extend(d.extra,c.extra);}var e,a;if(c.parseResponse){e=function(f){if(sch.isString(f)){a=c.parseResponse.call(c,f);return d.onSuccess(a);}else{if(f&&f.responseString){a=c.parseResponse.call(c,f.responseString);return d.onSuccess(a);}else{return d.onSuccess(f);}}};}else{e=d.onSuccess;}var b;if(d.service==="yfrog"){verify_url="https://api.twitter.com/1/account/verify_credentials.xml";b=this.getAuthHeader({getEchoHeaderOpts:{verify_url:verify_url}});}else{verify_url="https://api.twitter.com/1/account/verify_credentials.json";b=this.getAuthHeader();}sch.error(b);if(b.indexOf("Basic ")===0){d.username=this.opts.auth_obj.getUsername();d.password=this.opts.auth_obj.getPassword();}else{d.headers={"X-Auth-Service-Provider":verify_url,"X-Verify-Credentials-Authorization":b};}sc.helpers.HTTPUploadFile(d,e,d.onFailure);};var sc,Titanium,air,jQuery,Mojo;var SPAZCORE_PREFS_TI_KEY="preferences_json";var SPAZCORE_PREFS_AIR_FILENAME="preferences.json";var SPAZCORE_PREFS_MOJO_COOKIENAME="preferences.json";var SPAZCORE_PREFS_STANDARD_COOKIENAME="preferences_json";function SpazPrefs(b,c,a){this._prefs={};this._sanity_methods={};if(a){sch.debug("adding sanity methods to prefs");this._sanity_methods=a;}if(c){this.id=c;}if(b){this.setDefaults(b);this._applyDefaults();}this.loaded=false;}SpazPrefs.prototype.setDefaults=function(a){this._defaults=a;};SpazPrefs.prototype._applyDefaults=function(){var a;for(a in this._defaults){sc.helpers.debug('Copying default "'+a+'":"'+this._defaults[a]+'" ('+typeof(this._defaults[a])+")");this._prefs[a]=this._defaults[a];}};SpazPrefs.prototype.resetPrefs=function(){this._applyDefaults();this.save();};SpazPrefs.prototype.get=function(a,c){var b;if(c){b=this.getEncrypted(a);}else{sc.helpers.debug('Looking for pref "'+a+'"');if(this._prefs[a]!==undefined){sc.helpers.debug('Found pref "'+a+'" of value "'+this._prefs[a]+'" ('+typeof(this._prefs[a])+")");b=this._prefs[a];}else{b=undefined;}}if(this._sanity_methods[a]&&this._sanity_methods[a].onGet){sc.helpers.debug("Calling "+a+".onGet()");b=this._sanity_methods[a].onGet.call(this,a,b);}return b;};SpazPrefs.prototype.set=function(a,c,b){sc.helpers.debug('Setting and saving "'+a+'" to "'+c+'" ('+typeof(c)+")");if(this._sanity_methods[a]&&this._sanity_methods[a].onSet){sc.helpers.debug("Calling "+a+".onSet()");c=this._sanity_methods[a].onSet.call(this,a,c);}if(b){this.setEncrypted(a,c);}else{this._prefs[a]=c;}this.save();};SpazPrefs.prototype.setSanityMethod=function(a,b,c){if(b!=="onGet"&&b!=="onSet"){sch.error("sanity method type must be onGet or onSet");}if(!this._sanity_methods[a]){this._sanity_methods[a]={};}this._sanity_methods[a][b]=c;};SpazPrefs.prototype.getEncrypted=function(a){alert("not yet implemented");};SpazPrefs.prototype.setEncrypted=function(a,b){alert("not yet implemented");};SpazPrefs.prototype.load=function(a){};SpazPrefs.prototype.save=function(){};if(sc){var scPrefs=SpazPrefs;}var sc;function SpazShortText(){this.map={};this.genBaseMaps();this.processBaseMaps();}SpazShortText.prototype.genBaseMaps=function(){this.basemap={about:"abt",account:"acct",address:"addy",anyone:"ne1",and:"&",at:"@","at the moment":"atm",back:"bk","be right back":"brb","be back later":"bbl","be back soon":"bbs",because:"b/c",boyfriend:"bf",but:"but",girlfriend:"gf",between:"b/t","by the way":"btw",definitely:"def",everyone:"evr1",favorite:"fav","for":"fr",from:"frm","for example":"Fr ex",follow:"fllw",follower:"fllwr",followers:"fllwrs",following:"fllwng",good:"gd",got:"gt",having:"hvg",hours:"hrs","i don't know":"idk","if i recall correctly":"iirc","in my opinion":"imo","in my humble opinion":"imho",just:"jst",little:"lttl",love:"<3",message:"msg",midnight:"12am","never mind":"nm","no problem":"np","not much":"nm",pages:"pgs",pictures:"pics",obviously:"obvs",please:"pls",seriously:"srsly",something:"s/t",sorry:"sry",text:"txt",thanks:"thx",think:"thk","to be honest":"tbh",though:"tho",through:"thru",weeks:"wks","with":"w",without:"w/o",that:"tht",what:"wht",have:"hv","don't":"dnt",was:"ws",well:"wll",right:"rt",here:"hr",going:"gng",like:"lk",can:"cn",want:"wnt","that's":"thts",there:"thr",come:"cme",really:"rly",would:"wld",look:"lk",when:"whn",okay:"ok","can't":"cnt",tell:"tll","I'll":"Ill",could:"cl","didn't":"ddnt",yes:"y",had:"hd",then:"thn",take:"tke",make:"mk",gonna:"gna",never:"nvr",them:"thm",more:"mr",over:"ovr",where:"whr","what's":"whts",thing:"thg",maybe:"mybe",down:"dwn",very:"very",should:"shld",anything:"nethg",said:"sd",any:"ne",even:"evn",thank:"thk",give:"gve",thought:"thot",help:"hlp",talk:"tlk",people:"ppl",find:"fnd",nothing:"nthg",again:"agn",things:"thgs",call:"cll",told:"tld",great:"grt",before:"b4",better:"bttr",ever:"evr",night:"nite",than:"thn",away:"awy",first:"1st",believe:"blve",other:"othr",everything:"evrythg",work:"wrk",fine:"fne",home:"hme",after:"aftr",last:"lst",keep:"kp",around:"arnd",stop:"stp","long":"lng",always:"alwys",listen:"lstn",wanted:"wntd",happened:"hppnd","won't":"wnt",trying:"tryng",kind:"knd",wrong:"wrng",talking:"tlkg",being:"bng",bad:"bd",remember:"rmbr",getting:"gttg",together:"togthr",mother:"mom",understand:"undrstd","wouldn't":"wldnt",actually:"actly",baby:"bby",father:"dad",done:"dne","wasn't":"wsnt",might:"mite",every:"evry",enough:"engh",someone:"sm1",family:"fmly",whole:"whl",another:"anthr",jack:"jck",yourself:"yrslf",best:"bst",must:"mst",coming:"cmg",looking:"lkg",woman:"wmn",which:"whch",years:"yrs",room:"rm",left:"lft",tonight:"2nte",real:"rl",hmm:"hm",happy:"hpy",pretty:"prty",girl:"grl",show:"shw",friend:"frnd",already:"alrdy",saying:"syng",next:"nxt",job:"jb",problem:"prblm",minute:"min",found:"fnd",world:"wrld",thinking:"thkg","haven't":"hvnt",heard:"hrd",honey:"hny",matter:"mttr",myself:"myslf","couldn't":"cldnt",exactly:"xctly",probably:"prob",happen:"hppn","we've":"wve",hurt:"hrt",both:"bth",gotta:"gtta",alone:"alne",excuse:"xcse",start:"strt",today:"2dy",ready:"rdy",until:"untl",whatever:"wtevr",wants:"wnts",hold:"hld",yet:"yt",took:"tk",once:"1ce",gone:"gne",called:"clld",morning:"morn",supposed:"sppsd",friends:"frnds",stuff:"stff",most:"mst",used:"usd",worry:"wrry",second:"2nd",part:"prt",truth:"trth",school:"schl",forget:"frgt",business:"biz",cause:"cuz",telling:"tllg",chance:"chnce",move:"mv",person:"prsn",somebody:"smbdy",heart:"hrt",point:"pt",later:"ltr",making:"makg",anyway:"nywy",many:"mny",phone:"phn",reason:"rsn",looks:"lks",bring:"brng",turn:"trn",tomorrow:"tmrw",trust:"trst",check:"chk",change:"chng",anymore:"anymr",town:"twn","aren't":"rnt",working:"wrkg",year:"yr",taking:"tkg",means:"mns",brother:"bro",play:"ply",hate:"h8",says:"sez",beautiful:"btfl",crazy:"crzy",party:"prty",afraid:"afrd",important:"imptnt",rest:"rst",word:"wrd",watch:"wtch",glad:"gld",sister:"sistr",minutes:"min",everybody:"evrybdy",couple:"cpl",either:"ethr",feeling:"flg",under:"undr","break":"brk",promise:"prmse",easy:"ez",question:"q",doctor:"doc",walk:"wlk",trouble:"trbl",different:"diff",hospital:"hsptl",anybody:"anybdy",wedding:"wddg",perfect:"prfct",police:"cops",waiting:"wtng",dinner:"din",against:"agst",funny:"fny",husband:"hsbnd",child:"kid","shouldn't":"shldnt",half:"1/2",moment:"mmnt",sleep:"slp",started:"strtd",young:"yng",sounds:"snds",lucky:"lky",sometimes:"smtimes",plan:"pln",serious:"srs",ahead:"ahd",week:"wk",wonderful:"wndfl",past:"pst",number:"#",nobody:"nbdy",along:"alng","finally":"fnly",worried:"wrrd",book:"bk",sort:"srt",safe:"sfe",living:"livg",children:"kids","weren't":"wrnt",front:"frnt",loved:"luvd",asking:"askg",running:"rnng",clear:"clr",figure:"fgr",felt:"flt",parents:"prnts",absolutely:"abs",alive:"alve",meant:"mnt",happens:"hppns",kidding:"kddg",full:"fl",meeting:"mtg",coffee:"cffe",sound:"snd",women:"wmn",welcome:"wlcm",months:"mnths",hour:"hr",speak:"spk",thinks:"thks",Christmas:"Xmas",possible:"pssble",worse:"wrs",company:"co",mistake:"mstk",handle:"hndl",spend:"spnd",totally:"ttly",giving:"gvg",control:"ctrl",realize:"rlze",power:"pwr",president:"pres",girls:"grls",taken:"tkn",picture:"pic",talked:"tlkd",hundred:"hndrd",changed:"chgd",completely:"cmpltly",explain:"exp",playing:"plyg",relationship:"rlshp",loves:"lvs",fucking:"fkg",anywhere:"newhr",questions:"qs",wonder:"wndr",calling:"cllg",somewhere:"smwhr",straight:"str8",fast:"fst",words:"wrds",worked:"wrkd",light:"lite",cannot:"can't",protect:"prtct","class":"cls",surprise:"sprise",sweetheart:"swthrt",looked:"lkd",except:"xcpt",takes:"tks",situation:"sitn",besides:"bsds",pull:"pll",himself:"hmslf","hasn't":"hsnt",worth:"wrth",amazing:"amzg",given:"gvn",expect:"xpct",rather:"rthr",black:"blk",movie:"film",country:"cntry",perhaps:"prhps",watching:"wtchg",darling:"darlg",honor:"hnr",personal:"prsnl",moving:"movg",till:"til",admit:"admt",problems:"prbs",information:"info",honest:"hnst",missed:"mssd",longer:"lngr",dollars:"$s",evening:"eve",starting:"strtg",suppose:"spps",street:"st",sitting:"sttg",favor:"fvr",apartment:"apt",court:"crt",terrible:"trrbl",clean:"cln",learn:"lrn",works:"wks",relax:"rlx",million:"mil",prove:"prv",smart:"smrt",missing:"missg",forgot:"frgt",small:"sm",interested:"intrstd",table:"tbl",become:"bcm",pregnant:"preg",middle:"mddl",ring:"rng",careful:"crfl",figured:"fgrd",stick:"stk",stopped:"stppd",standing:"stndg",forgive:"frgv",wearing:"wearg",hoping:"hopg",thousand:"k",paper:"ppr",tough:"tuff",count:"cnt",birthday:"bday",history:"hstry",share:"shr",offer:"offr",hurry:"hrry",feet:"ft",wondering:"wonderg",building:"buildg",ones:"1s",finish:"fin","would've":"wldve",interesting:"intrstg",enjoy:"njoy",road:"rd",staying:"stayg","short":"shrt",finished:"fin",respect:"rspct",spent:"spnt",attention:"attn",holding:"hldg",surprised:"srprsd",keeping:"kpg",putting:"puttg",dark:"drk",self:"slf",using:"usg",helping:"helpg",normal:"nrml",lawyer:"atty",floor:"flr",whether:"whthr","everything's":"evrthg's",present:"prsnt","private":"priv",cover:"cvr",judge:"jdg",upstairs:"upstrs",mommy:"mom",possibly:"pssbly",worst:"wrst","I am":"I'm","I will":"I'll","I had":"I'd","I would":"I'd","I have":"I've","You are":"You're","You will":"You'll","You had":"You'd","You would":"You'd","You have":"You've","He is":"He's","He has":"He's","He will":"He'll","He had":"He'd","He would":"He'd","She is":"She's","She has":"She's","She will":"She'll","She had":"She'd","She would":"She'd","It is":"It's","It has":"It's","It will":"It'll","It would":"It'd","It had":"It'd","We are":"We're","We will":"We'll","We had":"We'd","We would":"We'd","We have":"We've","They are":"They're","They will":"They'll","They had":"They'd","They would":"They'd","They have":"They've","There is":"There's","There has":"There's","There will":"There'll","There had":"There'd","There would":"There'd","That is":"That's","That has":"That's","That will":"That'll","That had":"That'd","That would":"That'd","are not":"aren't","can not":"can't","could not":"couldn't","did not":"didn't","does not":"doesn't","do not":"don't","had not":"hadn't","has not":"hasn't","is not":"isn't","must not":"mustn't","need not":"needn't","should not":"shouldn't","was not":"wasn't","were not":"weren't","will not":"won't","would not":"wouldn't",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10",eleven:"11",twelve:"12",twenty:"20"};this.baserawmap={"--":"","-\\s+":"-","\\s+-":"-","\\s+":" ","\\s+$":"","^\\s+":"","\\s?\\.\\.\\.":"","\\.\\s+":". ","\\.\\s*$":"","RT:? @[a-z0-9_]+:? RT:? @([a-z0-9_]+):?":"RT @$1"};};SpazShortText.prototype.processBaseMaps=function(){var b,d,c,a;for(b in this.basemap){d=this.basemap[b];c=new RegExp("(\\b)"+b+"(\\b)","gi");this.map[b]={"short":"$1"+d+"$2",regex:c};}for(b in this.baserawmap){d=this.baserawmap[b];c=new RegExp(b,"gi");this.map[b]={"short":d,regex:c};}};SpazShortText.prototype.shorten=function(d){for(var a in this.map){var c=this.map[a].regex;var b=this.map[a]["short"];d=d.replace(c,b);}return d;};SpazShortText.prototype.addMap=function(c,b,a){a=a||false;if(a){this.baserawmap[c]=b;}else{this.basemap[c]=b;}this.processBaseMaps();};SpazShortText.prototype.getMaps=function(){return this.map;};var sc,jQuery;var SPAZCORE_SHORTURL_SERVICE_SHORTIE="short.ie";var SPAZCORE_SHORTURL_SERVICE_ISGD="is.gd";var SPAZCORE_SHORTURL_SERVICE_BITLY="bit.ly";var SPAZCORE_SHORTURL_SERVICE_JMP="j.mp";var SPAZCORE_EXPANDABLE_DOMAINS=["bit.ly","cli.gs","digg.com","fb.me","is.gd","j.mp","kl.am","su.pr","tinyurl.com","goo.gl","307.to","adjix.com","b23.ru","bacn.me","bloat.me","budurl.com","clipurl.us","cort.as","dwarfurl.com","ff.im","fff.to","href.in","idek.net","korta.nu","lin.cr","livesi.de","ln-s.net","loopt.us","lost.in","memurl.com","merky.de","migre.me","moourl.com","nanourl.se","om.ly","ow.ly","peaurl.com","ping.fm","piurl.com","plurl.me","pnt.me","poprl.com","post.ly","rde.me","reallytinyurl.com","redir.ec","retwt.me","rubyurl.com","short.ie","short.to","smallr.com","sn.im","sn.vc","snipr.com","snipurl.com","snurl.com","tiny.cc","tinysong.com","togoto.us","tr.im","tra.kz","trg.li","twurl.cc","twurl.nl","u.mavrev.com","u.nu","ur1.ca","url.az","url.ie","urlx.ie","w34.us","xrl.us","yep.it","zi.ma","zurl.ws","chilp.it","notlong.com","qlnk.net","trim.li","url4.eu"];if(!sc.events){sc.events={};}sc.events.newShortURLSuccess="newShortURLSuccess";sc.events.newShortURLFailure="newShortURLFailure";sc.events.newExpandURLSuccess="recoverLongURLSuccess";sc.events.newExpandURLFailure="recoverLongURLFailure";function SpazShortURL(a){this.api=this.getAPIObj(a);this.expanded_cache={};}SpazShortURL.prototype.getAPIObj=function(a){var b={};b[SPAZCORE_SHORTURL_SERVICE_BITLY]={url:"http://bit.ly/api",getData:function(c,d){if(sc.helpers.isArray(c)){b[SPAZCORE_SHORTURL_SERVICE_BITLY].processing_multiple=true;b[SPAZCORE_SHORTURL_SERVICE_BITLY].url="http://api.bit.ly/shorten";d.longUrl=c;return d;}else{b[SPAZCORE_SHORTURL_SERVICE_BITLY].processing_multiple=false;return{url:c};}},processResult:function(f){if(b[SPAZCORE_SHORTURL_SERVICE_BITLY].processing_multiple===true){var c=sc.helpers.deJSON(f);var d={};for(var e in c.results){d[e]=c.results[e].shortUrl;}return d;}else{return f;}}};b[SPAZCORE_SHORTURL_SERVICE_JMP]={url:"http://j.mp/api",getData:function(c,d){if(sc.helpers.isArray(c)){b[SPAZCORE_SHORTURL_SERVICE_JMP].processing_multiple=true;b[SPAZCORE_SHORTURL_SERVICE_JMP].url="http://api.j.mp/shorten";d.longUrl=c;return d;}else{b[SPAZCORE_SHORTURL_SERVICE_JMP].processing_multiple=false;return{url:c};}},processResult:function(f){if(b[SPAZCORE_SHORTURL_SERVICE_JMP].processing_multiple===true){var c=sc.helpers.deJSON(f);var d={};for(var e in c.results){d[e]=c.results[e].shortUrl;}return d;}else{return f;}}};b[SPAZCORE_SHORTURL_SERVICE_SHORTIE]={url:"http://short.ie/api?",getData:function(c,e){if(c.match(/ /gi)){c=c.replace(/ /gi,"%20");}var d={orig:c,url:c,email:"","private":"false",format:"rest"};return d;}};b[SPAZCORE_SHORTURL_SERVICE_ISGD]={url:"http://is.gd/api.php",getData:function(c,d){return{longurl:c};}};return b[a];};SpazShortURL.prototype.shorten=function(a,c){var b=this;if(!c){c={};}c.event_target=c.event_target||document;c.apiopts=c.apiopts||null;var e=this.api.getData(a,c.apiopts);if(sc.helpers.getMojoURL){this.api.url=sc.helpers.getMojoURL(this.api.url);}var d=jQuery.ajax({traditional:true,dataType:"text",complete:function(g,f){},error:function(j,h,f){sc.helpers.dump(b.api.url+" error:"+h);var g={url:b.api.url,xhr:null,msg:null};if(j){g.xhr=j;sc.helpers.error("Error:"+j.status+" from "+b.api.url);}else{sc.helpers.error("Error:Unknown from "+b.api.url);g.msg="Unknown Error";}b._onShortenResponseFailure(g,c.event_target);},success:function(f){var g={};if(b.api.processResult){g=b.api.processResult(f);}else{g={shorturl:f,longurl:a};}sch.error(g);b._onShortenResponseSuccess(g,c.event_target);},type:"POST",url:this.api.url,data:e});};SpazShortURL.prototype._onShortenResponseSuccess=function(a,b){sc.helpers.triggerCustomEvent(sc.events.newShortURLSuccess,b,a);};SpazShortURL.prototype._onShortenResponseFailure=function(b,a){sc.helpers.triggerCustomEvent(sc.events.newShortURLFailure,a,b);};SpazShortURL.prototype.expand=function(d,c){var b=this;var a;if(!c){c={};}c.event_target=c.event_target||document;if((a=this.getExpandedURLFromCache())){b._onExpandResponseSuccess({shorturl:d,longurl:a},c.event_target);return;}var e=jQuery.ajax({dataType:"text",complete:function(g,f){},error:function(j,h,f){sc.helpers.dump(this.url+" error:"+h);var g={url:this.url,xhr:null,msg:null};if(j){g.xhr=j;sc.helpers.dump("Error:"+j.status+" from "+this.url);}else{sc.helpers.dump("Error:Unknown from "+this.url);g.msg="Unknown Error";}b._onExpandResponseFailure(g,c.event_target);},success:function(g){g=sc.helpers.deJSON(g);var f=g[d];b.saveExpandedURLToCache(d,f);b._onExpandResponseSuccess({shorturl:d,longurl:f},c.event_target);},beforeSend:function(f){},type:"GET",url:"http://longurlplease.appspot.com/api/v1.1",data:{q:d}});};SpazShortURL.prototype._onExpandResponseSuccess=function(a,b){sc.helpers.triggerCustomEvent(sc.events.newExpandURLSuccess,b,a);};SpazShortURL.prototype._onExpandResponseFailure=function(b,a){sc.helpers.triggerCustomEvent(sc.events.newExpandURLFailure,a,b);};SpazShortURL.prototype.findExpandableURLs=function(g){var h,c,e=[],a,j,b,f,d=[];for(c=0;c<SPAZCORE_EXPANDABLE_DOMAINS.length;c++){b=SPAZCORE_EXPANDABLE_DOMAINS[c];if(b=="ff.im"){d.push(new RegExp("http://"+b+"/(-?[a-zA-Z0-9]+)","gi"));}else{d.push(new RegExp("http://"+b+"/([a-zA-Z0-9]+)","gi"));}}for(c=0;c<d.length;c++){f=d[c];sch.dump("looking for "+f+" in '"+g+"'");while((a=f.exec(sch.trim(g)))!=null){e.push(a[0]);}}sch.dump(e);if(e.length>0){return e;}else{return null;}};SpazShortURL.prototype.expandURLs=function(d,c){for(var a=0;a<d.length;a++){var b=d[a];sch.dump("expanding "+b);this.expand(b,{event_target:c});}};SpazShortURL.prototype.replaceExpandableURL=function(c,b,a){c=c.replace(b,a,"gi");c=c.replace(b.replace("http://",""),a.replace("http://",""),"gi");return c;};SpazShortURL.prototype.getExpandedURLFromCache=function(a){return this.expanded_cache[a];};SpazShortURL.prototype.saveExpandedURLToCache=function(a,b){this.expanded_cache[a]=b;};var sc;function SpazTemplate(){this._tpls={};}SpazTemplate.prototype.addTemplateMethod=function(a,b){this._tpls[a]=b;};SpazTemplate.prototype.parseTemplate=function(b,c){var a=this._tpls[b](c);return a;};SpazTemplate.prototype.parseArray=function(c,d){var b="";for(var a=0;a<d.length;a++){b+=this.parseTemplate(c,d[a]);}return b;};var sc,jQuery;var SpazTimeline=function(b){var a=this;this.refresh=function(){sch.debug("Refreshing timeline");a.requestData.call(a);};this.onSuccess=function(d,c){sch.debug("onSuccess timeline");a.data_success.call(a,d,c);a.startRefresher();};this.onFailure=function(d,c){sch.debug("onFailure timeline");a.data_failure.call(a,d,c);a.startRefresher();};this._init(b);};SpazTimeline.prototype._init=function(a){a=a||{};this.max_items=a.max_items||100;this.refresh_time=a.refresh_time||1000*60*2;this.timeline_container_selector=a.timeline_container_selector||"#timeline";this.timeline_item_selector=a.timeline_item_selector||"div.timeline-entry";this.event_target=a.event_target||jQuery(this.timeline_container_selector).get(0);this.add_method=a.add_method||"prepend";this.success_event=a.success_event||"timeline-success";this.failure_event=a.failure_event||"timeline-failure";this.renderer=a.renderer||null;this.request_data=a.request_data||null;this.data_success=a.data_success||null;this.data_failure=a.data_failure||null;this.refresher=a.refresher||null;if(!this.renderer){throw new Error("renderer is required");}if(!this.request_data){throw new Error("request_data is required");}if(!this.data_success){throw new Error("data_success is required");}this.container=jQuery(this.timeline_container_selector).get(0);};SpazTimeline.prototype.last_id=-1;SpazTimeline.prototype.model=[];SpazTimeline.prototype.start=function(){sch.debug("Starting timeline");this.requestData();};SpazTimeline.prototype.requestData=function(){sch.debug("Requesting data timeline");this.stopRefresher();this.stopListening();this.startListening();var a=this.request_data();};SpazTimeline.prototype.startListening=function(){var a=this;sc.helpers.debug("Listening for "+a.success_event);sc.helpers.listen(a.event_target,a.success_event,a.onSuccess);sc.helpers.listen(a.event_target,a.failure_event,a.onFailure);};SpazTimeline.prototype.stopListening=function(){var a=this;sc.helpers.debug("Stopping listening for "+a.success_event);sc.helpers.unlisten(a.event_target,a.success_event);sc.helpers.unlisten(a.event_target,a.failure_event);};SpazTimeline.prototype.startRefresher=function(){this.stopRefresher();sc.helpers.debug("Starting refresher");if(this.refresh_time>1000){sc.helpers.debug("Refresh time is "+this.refresh_time+"ms");this.refresher=setInterval(this.refresh,this.refresh_time);}else{sc.helpers.debug("Not starting refresher; refresh time is "+this.refresh_time+"ms");}};SpazTimeline.prototype.stopRefresher=function(){sc.helpers.debug("Stopping refresher");clearInterval(this.refresher);};SpazTimeline.prototype.cleanup=function(){sch.debug("Cleaning up timeline");this.stopListening();this.stopRefresher();};SpazTimeline.prototype.addItems=function(c){sch.debug("Adding items to timeline");var b=[];var d="";for(var a=0;a<c.length;a++){b.push(this.renderItem(c[a],this.renderer));}if(this.add_method==="append"){b.reverse();d=b.join("");this.append(d);}else{d=b.join("");this.prepend(d);}this.removeExtraItems();};SpazTimeline.prototype.renderItem=function(b,c){sch.debug("Rendering item in timeline");var a=c(b);return a;};SpazTimeline.prototype.removeExtraItems=function(){sch.debug("Removing extra items in timeline");if(this.add_method==="append"){var a=true;}else{a=false;}sc.helpers.removeExtraElements(this.getEntrySelector(),this.max_items,a);};SpazTimeline.prototype.removeItems=function(a){};SpazTimeline.prototype.removeItem=function(a){};SpazTimeline.prototype.itemExists=function(a){sch.debug("Checking it item ("+a+") exists in timeline");var b=this.select(a);if(b.length>0){return true;}else{return false;}};SpazTimeline.prototype.hideItems=function(a){sch.debug("Hiding items in timeline");this.filterItems(a,"blacklist");};SpazTimeline.prototype.showItems=function(a){sch.debug("Showing items in timeline");this.filterItems(a,"whitelist");};SpazTimeline.prototype.filterItems=function(a,b){};SpazTimeline.prototype.sortItems=function(a,c){sch.debug("Sorting items in timeline");var b=this.select(a);b.sort(c);};SpazTimeline.prototype.select=function(a,b){if(!b){b=this.timeline_container_selector;}return jQuery(a,b).get();};SpazTimeline.prototype.prepend=function(a){jQuery(this.timeline_container_selector).prepend(a);};SpazTimeline.prototype.append=function(a){jQuery(this.timeline_container_selector).append(a);};SpazTimeline.prototype.getEntrySelector=function(){return this.timeline_container_selector+" "+this.timeline_item_selector;};var sc,DOMParser,jQuery,sch;if(!sc.events){sc.events={};}sc.events.tmdbMethodSuccess="tmdbMethodSuccess";sc.events.tmdbMethodFailure="tmdbMethodFailure";sc.events.tmdbMovieSearchSuccess="tmdbMovieSearchSuccess";sc.events.tmdbMovieSearchFailure="tmdbMovieSearchFailure";sc.events.tmdbMovieIMDBLookupSuccess="tmdbMovieIMDBLookupSuccess";sc.events.tmdbMovieIMDBLookupFailure="tmdbMovieIMDBLookupFailure";sc.events.tmdbMovieGetInfoSuccess="tmdbMovieGetInfoSuccess";sc.events.tmdbMovieGetInfoFailure="tmdbMovieGetInfoFailure";sc.events.tmdbMovieGetImagesSuccess="tmdbMovieGetImagesSuccess";sc.events.tmdbMovieGetImagesFailure="tmdbMovieGetImagesFailure";sc.events.tmdbPersonSearchSuccess="tmdbPersonSearchSuccess";sc.events.tmdbPersonSearchFailure="tmdbPersonSearchFailure";sc.events.tmdbPersonGetInfoSuccess="tmdbPersonGetInfoSuccess";sc.events.tmdbPersonGetInfoFailure="tmdbPersonGetInfoFailure";sc.events.tmdbHashGetInfoSuccess="tmdbHashGetInfoSuccess";sc.events.tmdbHashGetInfoFailure="tmdbHashGetInfoFailure";function SpazTMDB(a){a=sch.defaults({apikey:null,lang:"en",format:"json",eventTarget:document},a);this.apikey=a.apikey;this.lang=a.lang;this.format=a.format;this.eventTarget=a.eventTarget;this.baseURL="http://api.themoviedb.org/2.1/";}SpazTMDB.prototype.setAPIKey=function(a){this.apikey=a;};SpazTMDB.prototype.getAPIKey=function(){return this.apikey;};SpazTMDB.prototype.movieSearch=function(b,c,a){this.callMethod({method:"Movie.search",value:b,successEvent:sc.events.tmdbMovieSearchSuccess,failureEvent:sc.events.tmdbMovieSearchFailure,onSuccess:c,onFailure:a});};SpazTMDB.prototype.movieInfo=function(c,b,a){this.callMethod({method:"Movie.getInfo",value:c,successEvent:sc.events.tmdbMovieGetInfoSuccess,failureEvent:sc.events.tmdbMovieGetInfoFailure,onSuccess:b,onFailure:a});};SpazTMDB.prototype.movieImages=function(c,b,a){this.callMethod({method:"Movie.getImages",value:c,successEvent:sc.events.tmdbMovieGetInfoSuccess,failureEvent:sc.events.tmdbMovieGetInfoFailure,onSuccess:b,onFailure:a});};SpazTMDB.prototype.movieInfoIMDB=function(c,b,a){this.callMethod({method:"Movie.imdbLookup",value:c,successEvent:sc.events.tmdbMovieIMDBLookupSuccess,failureEvent:sc.events.tmdbMovieIMDBLookupFailure,onSuccess:b,onFailure:a});};SpazTMDB.prototype.personInfo=function(c,b,a){this.callMethod({method:"Person.getInfo",value:c,successEvent:sc.events.tmdbPersonGetInfoSuccess,failureEvent:sc.events.tmdbPersonGetInfoFailure,onSuccess:b,onFailure:a});};SpazTMDB.prototype.personSearch=function(a,c,b){this.callMethod({method:"Person.search",value:a,successEvent:sc.events.tmdbPersonSearchSuccess,failureEvent:sc.events.tmdbPersonSearchFailure,onSuccess:c,onFailure:b});};SpazTMDB.prototype.movieInfoHash=function(b,c,a){this.callMethod({method:"Hash.getInfo",value:b,successEvent:sc.events.tmdbHashGetInfoSuccess,failureEvent:sc.events.tmdbHashGetInfoFailure,onSuccess:c,onFailure:a});};SpazTMDB.prototype.getURL=function(c,b){var a=this.baseURL+c+"/"+this.lang+"/"+this.format+"/"+this.apikey+"/"+encodeURIComponent(b);return a;};SpazTMDB.prototype.callMethod=function(c){var b=this;c=sch.defaults({method:"Movie.search",value:"Road House",successEvent:sc.events.tmdbMethodSuccess,failureEvent:sc.events.tmdbMethodFailure,onSuccess:null,onFailure:null},c);var a=this.getURL(c.method,c.value);jQuery.ajax({url:a,type:"GET",success:function(d,e){if(c.onSuccess){c.onSuccess.call(b,d,e);}sch.trigger(c.successEvent,b.eventTarget,d);},error:function(f,e,d){if(c.onFailure){c.onFailure.call(b,f,e,d);}sch.trigger(c.failure,b.eventTarget,{url:a,xhr:f,msg:e});}});};var sc,jQuery,Mojo,use_palmhost_proxy;var SPAZCORE_SECTION_FRIENDS="friends";var SPAZCORE_SECTION_HOME="home";var SPAZCORE_SECTION_REPLIES="replies";var SPAZCORE_SECTION_DMS="dms";var SPAZCORE_SECTION_FAVORITES="favorites";var SPAZCORE_SECTION_COMBINED="combined";var SPAZCORE_SECTION_PUBLIC="public";var SPAZCORE_SECTION_SEARCH="search";var SPAZCORE_SECTION_USER="user-timeline";var SPAZCORE_SECTION_FRIENDLIST="friendslist";var SPAZCORE_SECTION_FOLLOWERSLIST="followerslist";var SPAZCORE_SECTION_USERLISTS="userlists";var SPAZCORE_SERVICE_TWITTER="twitter";var SPAZCORE_SERVICE_IDENTICA="identi.ca";var SPAZCORE_SERVICE_WORDPRESS_TWITTER="wordpress-twitter";var SPAZCORE_SERVICE_TUMBLR_TWITTER="tumblr-twitter";var SPAZCORE_SERVICE_CUSTOM="custom";var SPAZCORE_SERVICEURL_TWITTER="https://api.twitter.com/1/";var SPAZCORE_SERVICEURL_IDENTICA="https://identi.ca/api/";var SPAZCORE_SERVICEURL_WORDPRESS_TWITTER="https://twitter-api.wordpress.com/";var SPAZCORE_SERVICEURL_TUMBLR_TWITTER="http://www.tumblr.com/";function SpazTwit(a){this.opts=sch.defaults({auth:null,username:null,event_mode:"DOM",event_target:document,timeout:this.DEFAULT_TIMEOUT},a);this.auth=this.opts.auth;this.setSource("SpazCore");this.initializeData();this.initializeCombinedTracker();this.cache={users:{},posts:{}};this.me={};this.setBaseURL(SPAZCORE_SERVICEURL_TWITTER);if(sc&&sc.helpers&&sc.helpers.dump){window.dump=sc.helpers.dump;}else{var b=function(c){return;};}}SpazTwit.prototype.DEFAULT_TIMEOUT=1000*60;SpazTwit.prototype.getLastId=function(a){return this.data[a].lastid;};SpazTwit.prototype.setLastId=function(a,b){this.data[a].lastid=b;};SpazTwit.prototype.initializeData=function(){this.data={};this.data[SPAZCORE_SECTION_HOME]={lastid:1,items:[],newitems:[],max:200,min_age:5*60};this.data[SPAZCORE_SECTION_FRIENDS]={lastid:1,items:[],newitems:[],max:200,min_age:5*60};this.data[SPAZCORE_SECTION_REPLIES]={lastid:1,items:[],newitems:[],max:50,min_age:5*60};this.data[SPAZCORE_SECTION_DMS]={lastid:1,items:[],newitems:[],max:50,min_age:5*60};this.data[SPAZCORE_SECTION_FAVORITES]={lastid:1,items:[],newitems:[],max:100,min_age:5*60};this.data[SPAZCORE_SECTION_COMBINED]={items:[],newitems:[],updates:[],max:400,min_age:5*60};this.data[SPAZCORE_SECTION_FRIENDLIST]={items:[],newitems:[],max:500,min_age:5*60};this.data[SPAZCORE_SECTION_FOLLOWERSLIST]={items:[],newitems:[],max:500,min_age:5*60};this.data[SPAZCORE_SECTION_SEARCH]={lastid:0,items:[],newitems:[],lastresultdata:{},max:200,min_age:30};this.data[SPAZCORE_SECTION_USERLISTS]={items:[],newitems:[],max:500,min_age:5*60};};SpazTwit.prototype.initializeCombinedTracker=function(){this.combined_finished={};this.combined_finished[SPAZCORE_SECTION_HOME]=false;this.combined_finished[SPAZCORE_SECTION_REPLIES]=false;this.combined_finished[SPAZCORE_SECTION_DMS]=false;this.combined_errors=[];};SpazTwit.prototype.combinedTimelineFinished=function(){for(var a in this.combined_finished){if(!this.combined_finished[a]){return false;}}return true;};SpazTwit.prototype.combinedTimelineHasErrors=function(){if(this.combined_errors.length>0){return true;}else{return false;}};SpazTwit.prototype.combinedTimelineHasUpdates=function(){return this.data[SPAZCORE_SECTION_COMBINED].updates.length>0;};SpazTwit.prototype.combinedTimelineAddUpdates=function(a){if(a.id){a=[a];}var b;for(b in a){this.data[SPAZCORE_SECTION_COMBINED].updates.push(a[b].id);}};SpazTwit.prototype.combinedNewItemsRemoveUpdates=function(){if(!this.combinedTimelineHasUpdates()){return;}var d=this.data[SPAZCORE_SECTION_COMBINED],e=":"+d.updates.join(":")+":",c=d.newitems,a=[],b;for(b in c){if(!RegExp(":"+c[b].id+":").test(e)){a.push(c[b]);}}d.newitems=a;d.updates=[];};SpazTwit.prototype.setBaseURL=function(a){var b=a.charAt(a.length-1);if(b!=="/"){a=a+"/";}this.baseurl=a;};SpazTwit.prototype.setBaseURLByService=function(a){var b="";switch(a){case SPAZCORE_SERVICE_TWITTER:b=SPAZCORE_SERVICEURL_TWITTER;break;case SPAZCORE_SERVICE_IDENTICA:b=SPAZCORE_SERVICEURL_IDENTICA;break;case SPAZCORE_SERVICE_WORDPRESS_TWITTER:b=SPAZCORE_SERVICEURL_WORDPRESS_TWITTER;break;case SPAZCORE_SERVICE_TUMBLR_TWITTER:b=SPAZCORE_SERVICEURL_TUMBLR_TWITTER;break;default:b=SPAZCORE_SERVICEURL_TWITTER;break;}this.baseurl=b;};SpazTwit.prototype.setCredentials=function(a){this.auth=a;this.username=this.auth.username;};SpazTwit.prototype.setSource=function(a){this.source=a;};SpazTwit.prototype.getAPIURL=function(b,a){var c={};c.public_timeline="statuses/public_timeline.json";c.friends_timeline="statuses/friends_timeline.json";c.home_timeline="statuses/home_timeline.json";c.user_timeline="statuses/user_timeline.json";c.replies_timeline="statuses/replies.json";c.show="statuses/show/{{ID}}.json";c.show_related="related_results/show/{{ID}}.json";c.favorites="favorites.json";c.user_favorites="favorites/{{ID}}.json";c.dm_timeline="direct_messages.json";c.dm_sent="direct_messages/sent.json";c.friendslist="statuses/friends.json";c.followerslist="statuses/followers.json";c.show_user="users/show.json";c.featuredlist="statuses/featured.json";c.update="statuses/update.json";c.destroy_status="statuses/destroy/{{ID}}.json";c.dm_new="direct_messages/new.json";c.dm_destroy="direct_messages/destroy/{{ID}}.json";c.friendship_create="friendships/create/{{ID}}.json";c.friendship_destroy="friendships/destroy/{{ID}}.json";c.friendship_show="friendships/show.json";c.friendship_incoming="friendships/incoming.json";c.friendship_outgoing="friendships/outgoing.json";c.graph_friends="friends/ids.json";c.graph_followers="followers/ids.json";c.block_create="blocks/create/{{ID}}.json";c.block_destroy="blocks/destroy/{{ID}}.json";c.follow="notifications/follow/{{ID}}.json";c.unfollow="notifications/leave/{{ID}}.json";c.favorites_create="favorites/create/{{ID}}.json";c.favorites_destroy="favorites/destroy/{{ID}}.json";c.saved_searches_create="saved_searches/create.json";c.saved_searches_destroy="saved_searches/destroy/{{ID}}.json";c.verify_credentials="account/verify_credentials.json";c.ratelimit_status="account/rate_limit_status.json";c.update_profile="account/update_profile.json";c.saved_searches="saved_searches.json";c.report_spam="report_spam.json";c.lists="{{USER}}/lists.json";c.lists_list="{{USER}}/lists/{{SLUG}}.json";c.lists_memberships="{{USER}}/lists/memberships.json";c.lists_timeline="{{USER}}/lists/{{SLUG}}/statuses.json";c.lists_members="{{USER}}/{{SLUG}}/members.json";c.lists_check_member="{{USER}}/{{SLUG}}/members/{{ID}}.json";c.lists_subscribers="{{USER}}/{{SLUG}}/subscribers.json";c.lists_check_subscriber="{{USER}}/{{SLUG}}/subscribers/{{ID}}.json";c.lists_subscriptions="{{USER}}/lists/subscriptions.json";c.trends="trends.json";c.trends_current="trends/current.json";c.trends_daily="trends/daily.json";c.trends_weekly="trends/weekly.json";c.retweet="statuses/retweet/{{ID}}.json";c.retweets="statuses/retweets/{{ID}}.json";c.retweeted_by_me="statuses/retweeted_by_me.json";c.retweeted_to_me="statuses/retweeted_to_me.json";c.retweets_of_me="statuses/retweets_of_me.json";if(this.baseurl===SPAZCORE_SERVICEURL_TWITTER){c.search="http://search.twitter.com/search.json";}else{c.search="search.json";}c.test="help/test.json";c.downtime_schedule="help/downtime_schedule.json";if(c[b].indexOf("{{ID}}")>-1){if(typeof(a)==="string"){c[b]=c[b].replace("{{ID}}",a);}else{if(a&&typeof(a)==="object"){c[b]=c[b].replace("{{ID}}",a.id);}}}if(c[b].indexOf("{{USER}}")>-1){if(a&&typeof(a)==="object"){c[b]=c[b].replace("{{USER}}",a.user);}}if(c[b].indexOf("{{SLUG}}")>-1){if(a&&typeof(a)==="object"){c[b]=c[b].replace("{{SLUG}}",a.slug);}}if(c[b]){if(a&&typeof a!=="string"){a="?"+jQuery.param(a);}else{a="";}if(this.baseurl===SPAZCORE_SERVICEURL_TWITTER&&(b==="search")){return this._postProcessURL(c[b]+a);}else{return this._postProcessURL(this.baseurl+c[b]+a);}}else{return false;}};SpazTwit.prototype.verifyCredentials=function(e,b){var a=this.getAPIURL("verify_credentials");var c={url:a,process_callback:this._processAuthenticatedUser,success_event_type:"verify_credentials_succeeded",failure_event_type:"verify_credentials_failed",success_callback:e,failure_callback:b,method:"GET"};var d=this._callMethod(c);};SpazTwit.prototype._processAuthenticatedUser=function(b,a){this.me=b;this.initializeData();if(a.success_callback){a.success_callback(this.me);}this.triggerEvent(a.success_event_type,this.me);};SpazTwit.prototype.getPublicTimeline=function(d,b){var a=this.getAPIURL("public_timeline");var c=this._getTimeline({url:a,success_callback:d,failure_callback:b,success_event_type:"new_public_timeline_data"});};SpazTwit.prototype.getHomeTimeline=function(a,e,g,b,h,d){if(!g){g=null;}if(!e){e=50;}if(!a){if(this.data[SPAZCORE_SECTION_HOME].lastid&&this.data[SPAZCORE_SECTION_HOME].lastid>1){a=this.data[SPAZCORE_SECTION_HOME].lastid;}else{a=1;}}if(!b){b={};}if(b.combined){b.section=SPAZCORE_SECTION_HOME;}var f={};if(a<-1){f.max_id=Math.abs(a);}else{f.since_id=a;}f.count=e;if(g){f.page=g;}var c=this.getAPIURL("home_timeline",f);this._getTimeline({url:c,process_callback:this._processHomeTimeline,success_callback:h,failure_callback:d,success_event_type:"new_home_timeline_data",failure_event_type:"error_home_timeline_data",processing_opts:b});};SpazTwit.prototype._processHomeTimeline=function(a,c,b){sc.helpers.dump("Processing "+a.length+" items returned from home method");this._processTimeline(SPAZCORE_SECTION_HOME,a,c,b);};SpazTwit.prototype.getFriendsTimeline=function(a,e,g,b,h,d){if(!g){g=null;}if(!e){e=50;}if(!a){if(this.data[SPAZCORE_SECTION_FRIENDS].lastid&&this.data[SPAZCORE_SECTION_FRIENDS].lastid>1){a=this.data[SPAZCORE_SECTION_FRIENDS].lastid;}else{a=1;}}if(!b){b={};}if(b.combined){b.section=SPAZCORE_SECTION_FRIENDS;}var f={};f.since_id=a;f.count=e;if(g){f.page=g;}var c=this.getAPIURL("friends_timeline",f);this._getTimeline({url:c,process_callback:this._processFriendsTimeline,success_callback:h,failure_callback:d,success_event_type:"new_friends_timeline_data",failure_event_type:"error_friends_timeline_data",processing_opts:b});};SpazTwit.prototype._processFriendsTimeline=function(a,c,b){sc.helpers.dump("Processing "+a.length+" items returned from friends method");this._processTimeline(SPAZCORE_SECTION_FRIENDS,a,c,b);};SpazTwit.prototype.getReplies=function(a,e,g,b,h,d){if(!g){g=null;}if(!e){e=null;}if(!a){if(this.data[SPAZCORE_SECTION_REPLIES].lastid&&this.data[SPAZCORE_SECTION_REPLIES].lastid>1){a=this.data[SPAZCORE_SECTION_REPLIES].lastid;}else{a=1;}}if(!b){b={};}if(b.combined){b.section=SPAZCORE_SECTION_REPLIES;}var f={};if(a<-1){f.max_id=Math.abs(a);}else{f.since_id=a;}if(g){f.page=g;}if(e){f.count=e;}var c=this.getAPIURL("replies_timeline",f);this._getTimeline({url:c,process_callback:this._processRepliesTimeline,success_callback:h,failure_callback:d,success_event_type:"new_replies_timeline_data",failure_event_type:"error_replies_timeline_data",processing_opts:b});};SpazTwit.prototype._processRepliesTimeline=function(a,c,b){sc.helpers.dump("Processing "+a.length+" items returned from replies method");this._processTimeline(SPAZCORE_SECTION_REPLIES,a,c,b);};SpazTwit.prototype.getDirectMessages=function(a,e,g,b,h,d){if(!g){g=null;}if(!e){e=null;}if(!a){if(this.data[SPAZCORE_SECTION_DMS].lastid&&this.data[SPAZCORE_SECTION_DMS].lastid>1){a=this.data[SPAZCORE_SECTION_DMS].lastid;}else{a=1;}}if(!b){b={};}if(b.combined){b.section=SPAZCORE_SECTION_DMS;}var f={};if(a<-1){f.max_id=Math.abs(a);}else{f.since_id=a;}if(g){f.page=g;}if(e){f.count=e;}var c=this.getAPIURL("dm_timeline",f);this._getTimeline({url:c,process_callback:this._processDMTimeline,success_callback:h,failure_callback:d,success_event_type:"new_dms_timeline_data",failure_event_type:"error_dms_timeline_data",processing_opts:b});};SpazTwit.prototype._processDMTimeline=function(a,c,b){sc.helpers.dump("Processing "+a.length+" items returned from DM method");this._processTimeline(SPAZCORE_SECTION_DMS,a,c,b);};SpazTwit.prototype.getFavorites=function(e,a,f,c){if(!e){e=null;}if(!a){a={};}var d={};if(e){d.page=e;}var b=this.getAPIURL("favorites",d);this._getTimeline({url:b,process_callback:this._processFavoritesTimeline,success_callback:f,failure_callback:c,success_event_type:"new_favorites_timeline_data",failure_event_type:"error_favorites_timeline_data",processing_opts:a});};SpazTwit.prototype._processFavoritesTimeline=function(a,c,b){this._processTimeline(SPAZCORE_SECTION_FAVORITES,a,c,b);};SpazTwit.prototype.getSent=function(a,c,d,e,b){};SpazTwit.prototype.getSentDirectMessages=function(a,c,d,b){};SpazTwit.prototype.getUserTimeline=function(h,d,f,g,b){var c=sch.defaults({id:h,since_id:null,count:d||10,page:f||null,onSuccess:g,onFailure:b},h);if(!c.id||"object"===typeof c.id){return;}var e={};e.id=c.id;e.count=c.count;if(c.since_id){if(c.since_id<-1){e.max_id=Math.abs(c.since_id);}else{e.since_id=c.since_id;}}if(c.page){e.page=c.page;}var a=this.getAPIURL("user_timeline",e);this._getTimeline({url:a,process_callback:this._processUserTimeline,success_callback:c.onSuccess,failure_callback:c.onFailure,success_event_type:"new_user_timeline_data",failure_event_type:"error_user_timeline_data"});};SpazTwit.prototype._processUserTimeline=function(a,c,b){this._processTimeline(SPAZCORE_SECTION_USER,a,c,b);};SpazTwit.prototype.getCombinedTimeline=function(g,h,b){var j,m,c,n,l,q,p,e,d,f,o,k;var a={combined:true};if(g){if(g.friends_count){m=g.friends_count;}if(g.home_count){j=g.home_count;}if(g.replies_count){c=g.replies_count;}if(g.dm_count){n=g.dm_count;}if(g.home_since){l=g.home_since;}if(g.friends_since){q=g.friend_since;}if(g.replies_since){e=g.replies_since;}if(g.dm_since){p=g.dm_since;}if(g.home_page){d=g.home_page;}if(g.friends_page){f=g.friends_page;}if(g.replies_page){k=g.replies_page;}if(g.dm_page){o=g.dm_page;}if(!j){j=m;}if(!l){l=q;}if(!d){d=f;}if(g.force){a.force=true;}}this.getHomeTimeline(l,j,d,a,h,b);this.getReplies(e,c,k,a,h,b);this.getDirectMessages(p,n,o,a,h,b);};SpazTwit.prototype.search=function(j,k,b,h,c,e,g,d){if(!h){h=1;}if(!b){b=100;}var f={};f.q=j;f.rpp=b;f.page=h;if(c){f.lang=c;}if(e){f.geocode=e;}var a=this.getAPIURL("search",f);this._getTimeline({url:a,process_callback:this._processSearchTimeline,success_callback:g,failure_callback:d,success_event_type:"new_search_timeline_data",failure_event_type:"error_search_timeline_data"});};SpazTwit.prototype._processSearchTimeline=function(g,e,d){if(!d){d={};}this.data[SPAZCORE_SECTION_SEARCH].newitems=[];this.data[SPAZCORE_SECTION_SEARCH].lastresultdata=g;var b=g.results;if(b.length>0){for(var c=0;c<b.length;c++){b[c]=this._processSearchItem(b[c],SPAZCORE_SECTION_SEARCH);}b.sort(this._sortItemsAscending);var f=b[b.length-1].id;this.data[SPAZCORE_SECTION_SEARCH].lastid=f;sc.helpers.dump("this.data["+SPAZCORE_SECTION_SEARCH+"].lastid:"+this.data[SPAZCORE_SECTION_SEARCH].lastid);this.data[SPAZCORE_SECTION_SEARCH].newitems=b;this.data[SPAZCORE_SECTION_SEARCH].items=this.data[SPAZCORE_SECTION_SEARCH].items.concat(this.data[SPAZCORE_SECTION_SEARCH].newitems);this.data[SPAZCORE_SECTION_SEARCH].items=this.removeDuplicates(this.data[SPAZCORE_SECTION_SEARCH].items);sch.debug("NOT removing extras from search -- we don't do that anymore");var a={since_id:g.since_id,max_id:g.max_id,refresh_url:g.refresh_url,results_per_page:g.results_per_page,next_page:g.next_page,completed_in:g.completed_in,page:g.page,query:g.query};if(e.success_callback){e.success_callback(this.data[SPAZCORE_SECTION_SEARCH].newitems,a);}this.triggerEvent(e.success_event_type,[this.data[SPAZCORE_SECTION_SEARCH].newitems,a]);}else{if(e.success_callback){e.success_callback(null,[]);}this.triggerEvent(e.success_event_type,[]);}};SpazTwit.prototype._processSearchItem=function(b,a){b=this.deSnowFlake(b);b.SC_timeline_from=a;if(this.username){b.SC_user_received_by=this.username;}b.SC_is_search=true;if(!b.SC_created_at_unixtime){b.SC_created_at_unixtime=sc.helpers.httpTimeToInt(b.created_at);}if(!b.SC_text_raw){b.SC_text_raw=b.text;}if(!b.in_reply_to_screen_name&&b.in_reply_to_user_id){}if(!b.SC_retrieved_unixtime){b.SC_retrieved_unixtime=sc.helpers.getTimeAsInt();}b.user={profile_image_url:b.profile_image_url,screen_name:b.from_user,id:b.from_user_id};b.source=sc.helpers.fromHTMLSpecialChars(b.source);return b;};SpazTwit.prototype.getTrends=function(c,b){var a=this.getAPIURL("trends");this._getTimeline({url:a,process_callback:this._processTrends,success_callback:c,failure_callback:b,success_event_type:"new_trends_data",failure_event_type:"error_trends_data"});};SpazTwit.prototype._processTrends=function(e,d,c){if(!c){c={};}var a=e.trends;if(a.length>0){for(var b=0;b<a.length;b++){a[b].searchterm=a[b].name;if(/\s+/.test(a[b].searchterm)){a[b].searchterm='"'+a[b].searchterm+'"';}}if(d.success_callback){d.success_callback(a);}this.triggerEvent(d.success_event_type,a);}};SpazTwit.prototype._getTimeline=function(b){b=sch.defaults({method:"GET",timeout:this.DEFAULT_TIMEOUT,url:null,data:null,process_callback:null,processing_opts:null,success_event_type:null,failure_event_type:null,success_callback:null,failure_callback:null},b);var a=this;var c=jQuery.ajax({timeout:b.timeout,complete:function(e,d){sc.helpers.dump(b.url+" complete:"+d);if(d==="timeout"){a.triggerEvent(b.failure_event_type,{url:b.url,xhr:e,msg:d});}},error:function(j,h,d){sc.helpers.dump(b.url+' error:"'+h+'"');if(h.toLowerCase().indexOf("timeout")!==-1){a.triggerEvent(b.failure_event_type,{url:b.url,xhr:null,msg:h});if(!b.processing_opts||!b.processing_opts.combined){if(b.failure_callback){b.failure_callback(null,h,d);}}}else{if(j){if(!j.readyState<4){sc.helpers.dump("Error:"+j.status+" from "+b.url);if(j.responseText){try{var f=sc.helpers.deJSON(j.responseText);}catch(g){sc.helpers.dump(g.name+":"+g.message);f=j.responseText;}}}if(b.failure_callback){b.failure_callback(j,h,d);}if(b.failure_event_type){sc.helpers.dump("opts.failure_event_type:"+b.failure_event_type);a.triggerEvent(b.failure_event_type,{url:b.url,xhr:j,msg:h});}}else{sc.helpers.dump("Error:Unknown from "+b.url);if(b.failure_callback){b.failure_callback(null,h,d);}if(b.failure_event_type){a.triggerEvent(b.failure_event_type,{url:b.url,xhr:j,msg:"Unknown Error"});}}}a.triggerEvent("spaztwit_ajax_error",{url:b.url,xhr:j,msg:h});if(b.processing_opts&&b.processing_opts.combined){sc.helpers.dump("adding to combined processing errors");if(j&&j.readyState>3){a.combined_errors.push({url:b.url,xhr:j,msg:h,section:b.processing_opts.section});}else{a.combined_errors.push({url:b.url,xhr:null,msg:h,section:b.processing_opts.section});}a.combined_finished[b.processing_opts.section]=true;sc.helpers.dump(a.combined_errors);sc.helpers.dump(a.combined_finished);if(b.process_callback){b.process_callback.call(a,[],b,b.processing_opts);}}},success:function(d){sc.helpers.dump(b.url+" success! data:"+d);try{d=sc.helpers.deJSON(d);}catch(f){a.triggerEvent(b.failure_event_type,{url:b.url,xhr:c,msg:"Error decoding data from server"});}if(b.process_callback){b.process_callback.call(a,d,b,b.processing_opts);}else{if(b.success_callback){sch.error("CALLING SUCCESS CALLBACK");b.success_callback(d);}a.triggerEvent(b.success_event_type,d);}},beforeSend:function(d){sc.helpers.dump(b.url+" beforesend");if(a.auth){sch.debug("signing request");d.setRequestHeader("Authorization",a.auth.signRequest(b.method,b.url,b.data));}else{sch.debug("NOT signing request -- no auth object provided");}},type:b.method,url:b.url,data:b.data,dataType:"text"});return c;};SpazTwit.prototype._processTimeline=function(b,a,e,d){sch.debug(e);if(!d){d={};}if(b!==SPAZCORE_SECTION_USER){this.data[b].newitems=[];}if(a.length>0){var g=[];for(var c=0;c<a.length;c++){if(a[c]){g.push(this._processItem(a[c],b));}}a=g;g=null;a.sort(this._sortItemsAscending);if(b===SPAZCORE_SECTION_USER){if(e.success_callback){e.success_callback(a);}this.triggerEvent(e.success_event_type,a);}else{if(e.is_update_item){this.combinedTimelineAddUpdates(a);}else{var f=a[a.length-1].id;this.data[b].lastid=f;sc.helpers.dump("this.data["+b+"].lastid:"+this.data[b].lastid);}this.data[b].newitems=a;this._addToSectionItems(b,this.data[b].newitems);if(!d.combined){if(e.success_callback){e.success_callback(this.data[b].newitems);}this.triggerEvent(e.success_event_type,this.data[b].items);}else{this.combined_finished[b]=true;sc.helpers.dump("this.combined_finished["+b+"]:"+this.combined_finished[b]);}this.data[SPAZCORE_SECTION_COMBINED].newitems=this.data[SPAZCORE_SECTION_COMBINED].newitems.concat(this.data[b].newitems);}}else{if(!d.combined){if(e.success_callback){e.success_callback();}this.triggerEvent(e.success_event_type);}else{this.combined_finished[b]=true;}}if(this.combinedTimelineFinished()){this.combinedNewItemsRemoveUpdates();this._addToSectionItems(SPAZCORE_SECTION_COMBINED,this.data[SPAZCORE_SECTION_COMBINED].newitems,this._sortItemsByDateAsc);this.data[SPAZCORE_SECTION_COMBINED].newitems=this._cleanupItemArray(this.data[SPAZCORE_SECTION_COMBINED].newitems,this.data[SPAZCORE_SECTION_COMBINED].max,this._sortItemsByDateAsc);if(this.combinedTimelineHasErrors()){if(e.failure_callback){e.failure_callback(this.combined_errors);}this.triggerEvent("error_combined_timeline_data",this.combined_errors);}if(e.success_callback){e.success_callback(this.data[SPAZCORE_SECTION_COMBINED].newitems);}sch.debug("this.data[SPAZCORE_SECTION_COMBINED].newitems has "+this.data[SPAZCORE_SECTION_COMBINED].newitems.length+" items");this.triggerEvent("new_combined_timeline_data",this.data[SPAZCORE_SECTION_COMBINED].newitems);this.data[SPAZCORE_SECTION_COMBINED].newitems=[];this.initializeCombinedTracker();}};SpazTwit.prototype._addToSectionItems=function(b,a,c){var d=this.data[b];d.items=this._cleanupItemArray(d.items.concat(a),null,c);};SpazTwit.prototype._cleanupItemArray=function(b,a,c){if(c){b=b.sort(c);}b=this.removeDuplicates(b);sch.debug("NOT removing extras -- we don't do that anymore");return b;};SpazTwit.prototype._processItem=function(b,a){b=this.deSnowFlake(b);b.SC_timeline_from=a;if(this.username){b.SC_user_received_by=this.username;}if((b.in_reply_to_screen_name&&b.SC_user_received_by)){if(b.in_reply_to_screen_name.toLowerCase()===b.SC_user_received_by.toLowerCase()){b.SC_is_reply=true;}}if(b.retweeted_status){b.SC_is_retweet=true;}if(a===SPAZCORE_SECTION_REPLIES){b.SC_is_reply=true;}if(this.username&&sc.helpers.containsScreenName(b.text,this.username)){b.SC_is_reply=true;}if(b.recipient_id&&b.sender_id){b.SC_is_dm=true;}if(!b.SC_created_at_unixtime){b.SC_created_at_unixtime=sc.helpers.httpTimeToInt(b.created_at);}if(!b.SC_text_raw){b.SC_text_raw=b.text;}if(!b.in_reply_to_screen_name&&b.in_reply_to_user_id){}if(!b.SC_retrieved_unixtime){b.SC_retrieved_unixtime=sc.helpers.getTimeAsInt();}return b;};SpazTwit.prototype._processUser=function(b,a){b=this.deSnowFlake(b);b.SC_timeline_from=a;if(this.username){b.SC_user_received_by=this.username;}if(a===SPAZCORE_SECTION_FOLLOWERSLIST){b.SC_is_follower;}if(a===SPAZCORE_SECTION_FRIENDLIST){b.SC_is_followed;}if(!b.SC_created_at_unixtime){b.SC_created_at_unixtime=sc.helpers.httpTimeToInt(b.created_at)/1000;}if(!b.SC_retrieved_unixtime){b.SC_retrieved_unixtime=sc.helpers.getTimeAsInt()/1000;}return b;};SpazTwit.prototype.getEchoHeader=function(c){var a;if(c&&c.verify_url){a=c.verify_url;}else{a=this.getAPIURL("verify_credentials");}var d="GET";var b=this.auth.signRequest(d,a,null);return b;};SpazTwit.prototype._callMethod=function(b){b=sch.defaults({method:"POST",timeout:this.DEFAULT_TIMEOUT,url:null,data:null,process_callback:null,success_event_type:null,failure_event_type:null,success_callback:null,failure_callback:null},b);var d;var a=this;if(b.method){d=b.method;}else{d="POST";}var c=jQuery.ajax({timeout:this.opts.timeout,complete:function(f,e){sc.helpers.dump(b.url+" complete:"+e);},error:function(k,j,f){sc.helpers.error(b.url+" error:"+j);if(k){if(!k.readyState<4){sc.helpers.dump("Error:"+k.status+" from "+b.url);if(k.responseText){try{var g=sc.helpers.deJSON(k.responseText);}catch(h){sc.helpers.dump(h.name+":"+h.message);g=k.responseText;}}}if(b.failure_callback){b.failure_callback(k,j,f);}if(b.failure_event_type){a.triggerEvent(b.failure_event_type,{url:b.url,xhr:k,msg:j});}}else{sc.helpers.dump("Error:Unknown from "+b.url);if(b.failure_callback){b.failure_callback(null,j,f);}if(b.failure_event_type){a.triggerEvent(b.failure_event_type,{url:b.url,xhr:null,msg:"Unknown Error"});}}a.triggerEvent("spaztwit_ajax_error",{url:b.url,xhr:k,msg:j});},success:function(e){sc.helpers.error(b.url+" success");e=sc.helpers.deJSON(e);if(b.process_callback){b.process_callback.call(a,e,b);}else{if(b.success_callback){b.success_callback(e);}a.triggerEvent(b.success_event_type,e);}},beforeSend:function(e){sc.helpers.dump(b.url+" beforesend");if(a.auth){sch.debug("signing request");e.setRequestHeader("Authorization",a.auth.signRequest(d,b.url,b.data));}else{sch.debug("NOT signing request -- no auth object provided");}},type:d,url:b.url,data:b.data,dataType:"text"});return c;};SpazTwit.prototype.getUser=function(a,g,c){var e={};if(sch.isString(a)&&a.indexOf("@")===0){e.screen_name=a.substr(1);}else{e.user_id=a;}var b=this.getAPIURL("show_user");var d={url:b,data:e,success_event_type:"get_user_succeeded",failure_event_type:"get_user_failed",success_callback:g,failure_callback:c,method:"GET"};var f=this._callMethod(d);};SpazTwit.prototype.getFriendsList=function(a,h,g,c){var b=this.getAPIURL("friendslist");var e={};if(sch.isString(a)&&a.indexOf("@")===0){e.screen_name=a.substr(1);}else{e.user_id=a;}if(h){e.cursor=h;}else{e.cursor=-1;}var d={url:b,data:e,success_callback:g,failure_callback:c,process_callback:this._processFriendsList,success_event_type:"get_friendslist_succeeded",failure_event_type:"get_friendslist_failed",method:"GET"};var f=this._getTimeline(d);};SpazTwit.prototype._processFriendsList=function(a,c,b){this._processUserList(SPAZCORE_SECTION_FRIENDLIST,a,c,b);};SpazTwit.prototype.getFollowersList=function(a,h,g,c){var b=this.getAPIURL("followerslist");var e={};if(sch.isString(a)&&a.indexOf("@")===0){e.screen_name=a.substr(1);}else{e.user_id=a;}if(h){e.cursor=h;}else{e.cursor=-1;}var d={url:b,data:e,success_callback:g,failure_callback:c,process_callback:this._processFollowersList,success_event_type:"get_followerslist_succeeded",failure_event_type:"get_followerslist_failed",method:"GET"};var f=this._getTimeline(d);};SpazTwit.prototype._processFollowersList=function(a,c,b){this._processUserList(SPAZCORE_SECTION_FOLLOWERSLIST,a,c,b);};SpazTwit.prototype._processUserList=function(d,j,b,h){var c=[],g=-1,e=-1;if(!h){h={};}if(j.users){c=j.users;g=j.next_cursor_str;e=j.previous_cursor_str;}else{c=j;}if(c.length>0){for(var f=0;f<c.length;f++){c[f]=this._processUser(c[f],d);sch.dump(c[f]);}var a=c[c.length-1].id;this.data[d].lastid=a;sc.helpers.dump("this.data["+d+"].lastid:"+this.data[d].lastid);this.data[d].newitems=c;this._addToSectionItems(d,this.data[d].newitems);if(b.success_callback){b.success_callback(this.data[d].newitems,{next:g,prev:e});}this.triggerEvent(b.success_event_type,this.data[d].newitems);}else{if(b.success_callback){b.success_callback(c,{next:g,prev:e});}this.triggerEvent(b.success_event_type);}};SpazTwit.prototype.addFriend=function(a,g,c){var e={};e.id=a;var b=this.getAPIURL("friendship_create",e);var d={url:b,success_event_type:"create_friendship_succeeded",failure_event_type:"create_friendship_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.removeFriend=function(a,g,c){var e={};e.id=a;var b=this.getAPIURL("friendship_destroy",e);var d={url:b,success_event_type:"destroy_friendship_succeeded",failure_event_type:"destroy_friendship_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.showFriendship=function(b,h,g,c){var e={};if(sch.isString(b)&&b.indexOf("@")===0){e.target_screen_name=b.substr(1);}else{e.target_id=b;}if(h){if(sch.isString(h)&&h.indexOf("@")===0){e.source_screen_name=h.substr(1);}else{e.source_id=h;}}var a=this.getAPIURL("friendship_show",e);var d={url:a,method:"GET",success_event_type:"show_friendship_succeeded",failure_event_type:"show_friendship_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.getIncomingFriendships=function(g,f,b){var d={};if(!g){g=-1;}d.cursor=g;var a=this.getAPIURL("friendship_incoming",d);var c={url:a,method:"GET",success_event_type:"get_incoming_friendships_succeeded",failure_event_type:"get_incoming_friendships_failed",success_callback:f,failure_callback:b,data:d};var e=this._callMethod(c);};SpazTwit.prototype.getOutgoingFriendships=function(g,f,b){var d={};if(!g){g=-1;}d.cursor=g;var a=this.getAPIURL("friendship_outgoing",d);var c={url:a,method:"GET",success_event_type:"get_outgoing_friendships_succeeded",failure_event_type:"get_outgoing_friendships_failed",success_callback:f,failure_callback:b,data:d};var e=this._callMethod(c);};SpazTwit.prototype.getFriendsGraph=function(a,h,g,c){var e={};if(!h){h=-1;}e.cursor=h;e.user_id=a;var b=this.getAPIURL("graph_friends",e);var d={url:b,method:"GET",success_event_type:"get_friends_graph_succeeded",failure_event_type:"get_friends_graph_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.getFollowersGraph=function(a,h,g,c){var e={};if(!h){h=-1;}e.cursor=h;e.user_id=a;var b=this.getAPIURL("graph_followers",e);var d={url:b,method:"GET",success_event_type:"get_followers_graph_succeeded",failure_event_type:"get_followers_graph_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.block=function(a,g,c){var e={};e.id=a;var b=this.getAPIURL("block_create",e);var d={url:b,success_event_type:"create_block_succeeded",failure_event_type:"create_block_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.unblock=function(a,g,c){var e={};e.id=a;var b=this.getAPIURL("block_destroy",e);var d={url:b,success_event_type:"destroy_block_succeeded",failure_event_type:"destroy_block_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.follow=function(a,g,c){var e={};e.id=a;var b=this.getAPIURL("follow",e);var d={url:b,username:this.username,password:this.password,success_event_type:"follow_succeeded",failure_event_type:"follow_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.unfollow=function(a,g,c){var e={};e.id=a;var b=this.getAPIURL("unfollow",e);var d={url:b,username:this.username,password:this.password,success_event_type:"unfollow_succeeded",failure_event_type:"unfollow_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.update=function(e,a,g,h,d){var c=this.getAPIURL("update");var f={};if(g){f.in_reply_to_status_id=g;}if(a){f.source=a;}else{f.source=this.source;}f.status=e;var b={url:c,data:f,process_callback:this._processUpdateReturn,success_callback:h,failure_callback:d,success_event_type:"update_succeeded",failure_event_type:"update_failed"};var j=this._callMethod(b);};SpazTwit.prototype._processUpdateReturn=function(b,a){a.is_update_item=true;this._processTimeline(SPAZCORE_SECTION_HOME,[b],a);};SpazTwit.prototype.sendDirectMessage=function(a,h,g,c){var b=this.getAPIURL("dm_new");var e={};if(sch.isString(a)&&a.indexOf("@")===0){e.screen_name=a.substr(1);}else{e.user_id=a;}e.text=h;var d={url:b,data:e,success_callback:g,failure_callback:c,success_event_type:"sent_dm_succeeded",failure_event_type:"sent_dm_failed"};var f=this._callMethod(d);};SpazTwit.prototype.destroy=function(g,f,b){var d={};d.id=g;var a=this.getAPIURL("destroy_status",d);var c={url:a,data:d,success_event_type:"destroy_status_succeeded",success_callback:f,failure_callback:b,failure_event_type:"destroy_status_failed"};var e=this._callMethod(c);};SpazTwit.prototype.destroyDirectMessage=function(g,f,b){var d={};d.id=g;var a=this.getAPIURL("dm_destroy",d);var c={url:a,data:d,success_event_type:"destroy_dm_succeeded",success_callback:f,failure_callback:b,failure_event_type:"destroy_dm_failed"};var e=this._callMethod(c);};SpazTwit.prototype.getOne=function(g,f,b){var d={};d.id=g;var a=this.getAPIURL("show",d);var c={url:a,process_callback:this._processOneItem,success_event_type:"get_one_status_succeeded",success_callback:f,failure_callback:b,failure_event_type:"get_one_status_failed",method:"GET"};var e=this._callMethod(c);};SpazTwit.prototype._processOneItem=function(b,a){b=this._processItem(b);if(a.success_callback){a.success_callback(b);}this.triggerEvent(a.success_event_type,b);};SpazTwit.prototype.getRelated=function(g,f,b){var d={};d.id=g;var a=this.getAPIURL("show_related",d);var c={url:a,success_event_type:"get_related_success",failure_event_type:"get_related_failed",success_callback:f,failure_callback:b,method:"GET"};var e=this._callMethod(c);};SpazTwit.prototype.retweet=function(g,f,b){var d={};d.id=g;var a=this.getAPIURL("retweet",d);var c={url:a,username:this.username,password:this.password,success_event_type:"retweet_succeeded",failure_event_type:"retweet_failed",success_callback:f,failure_callback:b,data:d};var e=this._callMethod(c);};SpazTwit.prototype.getRetweets=function(e,c){var a=this.getAPIURL("retweets",{id:e,count:c});var b={url:a,username:this.username,password:this.password,success_event_type:"get_retweets_succeeded",failure_event_Type:"get_retweets_failed",method:"GET"};var d=this._getTimeline(b);};SpazTwit.prototype.retweetedByMe=function(h,a,d,e){var g={};if(h!=null){g.since_id=h;}if(a!=null){g.max_id=a;}if(d==null){d=20;}g.count=d;if(e==null){e=1;}g.page=e;var b=this.getAPIURL("retweeted_by_me",g);var c={url:b,username:this.username,password:this.password,success_event_type:"retweeted_by_me_succeeded",failure_event_type:"retweeted_by_me_failed",method:"GET"};var f=this._getTimeline(c);};SpazTwit.prototype.retweetedToMe=function(h,a,d,e){var g={};if(h!=null){g.since_id=h;}if(a!=null){g.max_id=a;}if(d==null){d=20;}g.count=d;if(e==null){e=1;}g.page=e;var b=this.getAPIURL("retweeted_to_me",g);var c={url:b,username:this.username,password:this.password,success_event_type:"retweeted_to_me_succeeded",failure_event_type:"retweeted_to_me_failed",method:"GET"};var f=this._getTimeline(c);};SpazTwit.prototype.retweetsOfMe=function(h,a,d,e){var g={};if(h!=null){g.since_id=h;}if(a!=null){g.max_id=a;}if(d==null){d=20;}g.count=d;if(e==null){e=1;}g.page=e;var b=this.getAPIURL("retweets_of_me",g);var c={url:b,username:this.username,password:this.password,success_event_type:"retweets_of_me_succeeded",failure_event_type:"retweets_of_me_failed",method:"GET"};var f=this._getTimeline(c);};SpazTwit.prototype.favorite=function(g,f,b){var d={};d.id=g;var a=this.getAPIURL("favorites_create",d);var c={url:a,success_event_type:"create_favorite_succeeded",failure_event_type:"create_favorite_failed",success_callback:f,failure_callback:b,data:d};var e=this._callMethod(c);};SpazTwit.prototype.unfavorite=function(g,f,b){var d={};d.id=g;var a=this.getAPIURL("favorites_destroy",d);var c={url:a,success_event_type:"destroy_favorite_succeeded",failure_event_type:"destroy_favorite_failed",success_callback:f,failure_callback:b,data:d};var e=this._callMethod(c);};SpazTwit.prototype.updateLocation=function(b,g,c){var e={};e.location=b;this.setBaseURL(SPAZCORE_SERVICEURL_TWITTER);var a=this.getAPIURL("update_profile");var d={url:a,success_event_type:"update_location_succeeded",failure_event_type:"update_location_failed",success_callback:g,failure_callback:c,data:e};var f=this._callMethod(d);};SpazTwit.prototype.updateProfile=function(d,c,b,a,e){};SpazTwit.prototype.getRateLimitStatus=function(e,b){var a=this.getAPIURL("ratelimit_status");var c={method:"GET",url:a,success_event_type:"ratelimit_status_succeeded",failure_event_type:"ratelimit_status_failed",success_callback:e,failure_callback:b};var d=this._callMethod(c);};SpazTwit.prototype.test=function(){};SpazTwit.prototype._postProcessURL=function(b){if(typeof Mojo!=="undefined"){if(use_palmhost_proxy){var c=/https?:\/\/.[^\/:]*(?::[0-9]+)?/;var a=b.match(c);if(a&&a[0]!==Mojo.hostingPrefix){b="/proxy?url="+encodeURIComponent(b);}return b;}else{return b;}}else{return b;}};SpazTwit.prototype._sortItemsAscending=function(d,c){if(d.id<c.id){return -1;}if(d.id>c.id){return 1;}return 0;};SpazTwit.prototype._sortItemsDescending=function(d,c){if(d.id<c.id){return 1;}if(d.id>c.id){return -1;}return 0;};SpazTwit.prototype._sortItemsByDateAsc=function(d,c){var f=sc.helpers.httpTimeToInt(d.created_at);var e=sc.helpers.httpTimeToInt(c.created_at);return(f-e);};SpazTwit.prototype._sortItemsByDateDesc=function(d,c){var f=sc.helpers.httpTimeToInt(d.created_at);var e=sc.helpers.httpTimeToInt(c.created_at);return(e-f);};SpazTwit.prototype.removeDuplicates=function(a){var c=[],b={},f=a.length;try{for(var d=0;d<f;d++){var h=a[d].id;if(!b[h]){b[h]=true;c.push(a[d]);}else{sc.helpers.dump("removing dupe "+a[d].id+', "'+a[d].text+'"');}}}catch(g){sc.helpers.dump(g.name+":"+g.message);c=a;}return c;};SpazTwit.prototype.removeExtraElements=function(c,a,b){if(!b){b=false;}var d=c.length-a;if(d>0){if(!b){sc.helpers.dump("array length is "+c.length+" > "+a+"; removing last "+d+" entries");c.splice(d*-1,d);}else{sc.helpers.dump("array length is "+c.length+" > "+a+"; removing first "+d+" entries");c.splice(0,d);}}return c;};SpazTwit.prototype.getSavedSearches=function(e,b){var a=this.getAPIURL("saved_searches");var c={url:a,success_event_type:"new_saved_searches_data",failure_event_type:"error_saved_searches_data",success_callback:e,failure_callback:b,method:"GET"};var d=this._callMethod(c);};SpazTwit.prototype.addSavedSearch=function(b,f,c){var a=this.getAPIURL("saved_searches_create");var d={url:a,success_event_type:"create_saved_search_succeeded",failure_event_type:"create_saved_search_failed",success_callback:f,failure_callback:c,data:{query:b},method:"POST"};var e=this._callMethod(d);};SpazTwit.prototype.removeSavedSearch=function(a,f,c){var b=this.getAPIURL("saved_searches_destroy",a.toString());var d={url:b,success_event_type:"destroy_saved_search_succeeded",failure_event_type:"destroy_saved_search_failed",success_callback:f,failure_callback:c,data:{id:a},method:"POST"};sch.debug("opts for removeSavedSearch");sch.debug(d);var e=this._callMethod(d);};SpazTwit.prototype.getLists=function(a,f,c){if(!a&&!this.username){return;}else{if(!a){a=this.username;}}var b=this.getAPIURL("lists",{user:a});var d={url:b,success_event_type:"get_lists_succeeded",failure_event_type:"get_lists_failed",success_callback:f,failure_callback:c,method:"GET"};var e=this._callMethod(d);};SpazTwit.prototype._processUserLists=function(b,a,e,d){if(!d){d={};}if(a.length>0){for(var c=0;c<a.length;c++){a[c]=this._processList(a[c],b);sch.dump(a[c]);}a.sort(this._sortItemsAscending);var f=a[a.length-1].id;this.data[b].lastid=f;sc.helpers.dump("this.data["+b+"].lastid:"+this.data[b].lastid);this.data[b].newitems=a;this._addToSectionItems(b,this.data[b].newitems);if(e.success_callback){e.success_callback(this.data[b].newitems);}this.triggerEvent(e.success_event_type,this.data[b].newitems);}else{if(e.success_callback){e.success_callback();}this.triggerEvent(e.success_event_type);}};SpazTwit.prototype._processList=function(b,a){if(!b.SC_retrieved_unixtime){b.SC_retrieved_unixtime=sc.helpers.getTimeAsInt();}return b;};SpazTwit.prototype.getListInfo=function(e,a,g,c){if(!a&&!this.username){sch.error("must pass a username or have one set to get list");return;}a=a||this.username;var b=this.getAPIURL("lists_list",{user:a,slug:e});var d={url:b,success_event_type:"get_list_succeeded",failure_event_type:"get_list_failed",success_callback:g,failure_callback:c,method:"GET"};var f=this._callMethod(d);};SpazTwit.prototype.getListTimeline=function(e,a,g,c){if(!a&&!this.username){sch.error("must pass a username or have one set to get list");return;}a=a||this.username;var b=this.getAPIURL("lists_timeline",{user:a,slug:e});var d={url:b,success_event_type:"get_list_timeline_succeeded",failure_event_type:"get_list_timeline_failed",success_callback:g,failure_callback:c,method:"GET",process_callback:this._processListTimeline,processing_opts:{user:a,slug:e}};var f=this._getTimeline(d);};SpazTwit.prototype._processListTimeline=function(e,d,c){if(!c){c={};}var b=c.user||null;var a=c.slug||null;var f={statuses:e,user:b,slug:a};if(d.success_callback){d.success_callback(f);}this.triggerEvent(d.success_event_type,f);};SpazTwit.prototype.getListMembers=function(d,a){if(!a&&!this.username){sch.error("must pass a username or have one set to get list");return;}a=a||this.username;var b=this.getAPIURL("lists_members",{user:a,slug:d});var c={url:b,success_event_type:"get_list_members_succeeded",failure_event_type:"get_list_members_failed",method:"GET",process_callback:this._processListTimeline,processing_opts:{user:a,slug:d}};var e=this._getTimeline(c);};SpazTwit.prototype.addList=function(f,a,d){var e={};e.name=f;e.mode=a;e.description=d;var b=this.getAPIURL("lists",{user:this.username});var c={url:b,success_event_type:"create_list_succeeded",failure_event_type:"create_list_failed",success_callback:null,failure_callback:null,data:e};var g=this._callMethod(c);};SpazTwit.prototype.updateList=function(g,c,a,e){var f={};f.name=c;f.mode=a;f.description=e;var b=this.getAPIURL("lists_list",{user:this.username,slug:g});var d={url:b,username:this.username,password:this.password,success_event_type:"update_list_succeeded",failure_event_type:"update_list_failed",data:f};var h=this._callMethod(d);};SpazTwit.prototype.removeList=function(d,a){if(!a&&!this.username){sch.error("must pass a username or have one set to remove list");return;}a=a||this.username;var b=this.getAPIURL("lists_list",{user:a,slug:d});var c={url:b,success_event_type:"remove_list_succeeded",failure_event_type:"remove_list_failed",method:"DELETE"};var e=this._callMethod(c);};SpazTwit.prototype.addUserToList=function(a,e,g){var d={};d.list_id=e;d.id=g;if(!a&&!this.username){sch.error("must pass a username or have one set to add a user to a list");return;}a=a||this.username;var b=this.getAPIURL("lists_members",{user:a,slug:e});var c={url:b,success_event_type:"add_list_user_succeeded",failure_event_type:"add_list_user_failed",data:d};var f=this._callMethod(c);};SpazTwit.prototype.removeUserFromList=function(a,e,g){var d={};d.list_id=e;d.id=g;if(!a&&!this.username){sch.error("must pass a username or have one set to remove a user from a list");return;}a=a||this.username;var b=this.getAPIURL("lists_members",{user:a,slug:e});var c={url:b,success_event_type:"create_list_succeeded",failure_event_type:"create_list_failed",success_event_type:"remove_list_user_succeeded",failure_event_type:"remove_list_user_failed",data:d,method:"DELETE"};var f=this._callMethod(c);};SpazTwit.prototype.listsSubscribedTo=function(a){if(!a&&!this.username){sch.error("must pass a username or have one set to retrieve subscribed lists");return false;}a=a||this.username;var b=this.getAPIURL("lists_subscriptions",{user:a});var c={url:b,username:this.username,password:this.password,success_event_type:"get_subscriptions_succeeded",failure_event_type:"get_subscriptions_failed"};var d=this._callMethod(c);};SpazTwit.prototype.listMemberships=function(a){if(!a&&!this.username){sch.error("must pass a username or have one set to retrieve list memberships");return false;}a=a||this.username;var b=this.getAPIURL("lists_memberships",{user:a});var c={url:b,username:this.username,password:this.password,success_event_type:"get_list_memberships_succeeded",failure_event_type:"get_list_memberships_failed"};var d=this._callMethod(c);};SpazTwit.prototype.getListSubscribers=function(d,a){if(!a&&!this.username){sch.error("must pass a username or have one set to retrieve list subscribers");return false;}a=a||this.username;var b=this.getAPIURL("lists_subscribers",{user:a,slug:d});var c={url:b,username:this.username,password:this.password,success_event_type:"get_list_subscribers_succeeded",failure_event_type:"get_list_subscribers_failed",method:"GET"};var e=this._callMethod(c);};SpazTwit.prototype.isSubscribed=function(d,f,a){if(!a&&!this.username){sch.error("must pass a username or have one set to retrieve list subscribers");return false;}a=a||this.username;var b=this.getAPIURL("lists_check_subscriber",{user:a,slug:d,id:f});var c={url:b,username:this.username,password:this.password,success_event_type:"check_list_subscribers_succeeded",failure_event_type:"check_list_subscribers_failed",method:"GET"};var e=this._callMethod(c);};SpazTwit.prototype.subscribe=function(d,a){if(!a&&!this.username){sch.error("must pass a username or have one set to subscribe to a list");return false;}a=a||this.username;var b=this.getAPIURL("lists_subscribers",{user:a,slug:d});var c={url:b,username:this.username,password:this.password,success_event_type:"list_subscribe_succeeded",failure_event_type:"list_subscribe_failed",method:"POST"};var e=this._callMethod(c);};SpazTwit.prototype.unsubscribe=function(d,a){if(!a&&!this.username){sch.error("must pass a username or have one set to unsubscribe");return false;}a=a||this.username;var b=this.getAPIURL("lists_subscribers",{user:a,slug:d,id:list_user});var c={url:b,username:this.username,password:this.password,success_event_type:"list_unsubscribe_succeeded",failure_event_type:"list_unsubscribe_failed",method:"DELETE"};var e=this._callMethod(c);};SpazTwit.prototype.isMember=function(d,f,a){if(!a&&!this.username){sch.error("must pass a username or have one set to retrieve list memberships");return false;}a=a||this.username;var b=this.getAPIURL("lists_check_member",{user:a,slug:d,id:f});var c={url:b,username:this.username,password:this.password,success_event_type:"check_list_members_succeeded",failure_event_type:"check_list_members_failed",method:"GET"};var e=this._callMethod(c);};SpazTwit.prototype.reportSpam=function(a,g,c){var b=this.getAPIURL("report_spam");var e={};e.user_id=a;var d={url:b,username:this.username,password:this.password,success_callback:g,failure_callback:c,success_event_type:"report_spam_succeeded",failure_event_type:"report_spam_failed",method:"POST",data:e};var f=this._callMethod(d);};SpazTwit.prototype.openUserStream=function(b,a){var c=this;this.closeUserStream();this.userstream=new SpazTwitterStream({auth:this.auth,onData:function(e){var d;e=sch.trim(e);if(e){sch.error("new data:"+e);d=sch.deJSON(e);if(d.source&&d.user&&d.text){d=c._processItem(d,SPAZCORE_SECTION_HOME);if(b){b(d);}}if(d.direct_message){d=c._processItem(d.direct_message,SPAZCORE_SECTION_HOME);if(b){b(d);}}}}});this.userstream.connect();return this.userstream;};SpazTwit.prototype.closeUserStream=function(){if(this.userstream){sch.error("userstream exist disconnecting");this.userstream.disconnect();this.userstream=null;}};SpazTwit.prototype.userStreamExists=function(){if(this.userstream){return true;}return false;};SpazTwit.prototype.deSnowFlake=function(a){if(a.id_str){a.id=a.id_str;}if(a.in_reply_to_user_id_str){a.in_reply_to_user_id=a.in_reply_to_user_id_str;}if(a.in_reply_to_status_id_str){a.in_reply_to_status_id=a.in_reply_to_status_id_str;}if(a.to_user_id_str){a.to_user_id=a.to_user_id_str;}if(a.from_user_id_str){a.from_user_id=a.from_user_id_str;}if(a.user){a.user=this.deSnowFlake(a.user);}if(a.recipient){a.recipient=this.deSnowFlake(a.recipient);}if(a.sender){a.sender=this.deSnowFlake(a.sender);}if(a.retweeted_status){a.retweeted_status=this.deSnowFlake(a.retweeted_status);}return a;};SpazTwit.prototype.triggerEvent=function(a,b){var c=this.opts.event_target||document;b=b||null;sc.helpers.dump("TriggerEvent: target:"+c.toString()+" type:"+a+" data:"+b);if(this.opts.event_mode==="jquery"){b=[b];jQuery(c).trigger(a,b);}else{sc.helpers.trigger(a,c,b);}};if(sc){var scTwit=SpazTwit;}var sc,DOMParser,Titanium;sc.helpers.getFileContents=function(a){var b=Titanium.Filesystem.getFile(a);if(b.exists){return b.read();}else{return false;}};sc.helpers.setFileContents=function(a,c,b){if(b){c=JSON.stringify(c);}sc.helpers.debug("setFileContents for "+a+' to "'+c+'"');try{var d=Titanium.Filesystem.getFile(a);d.write(c);}catch(g){sch.error("There was an error setting file contents:"+g.message);}};sc.helpers.fileExists=function(a){var b=Titanium.Filesystem.getFile(a);return b.exists();};sc.helpers.isFile=function(a){var b=Titanium.Filesystem.getFile(a);return b.isFile();};sc.helpers.isDirectory=function(a){var b=Titanium.Filesystem.getFile(a);return b.isDirectory();};sc.helpers.resolvePath=function(a,c){var b=Titanium.Filesystem.getFile(a);return b.resolve(c).toString();};sc.helpers.getFileObject=function(a){return Titanium.Filesystem.getFile(a);};sc.helpers.copyFile=function(a,d){var c=Titanium.Filesystem.getFile(a);var b=Titanium.Filesystem.getFile(d);c.copy(b);};sc.helpers.moveFile=function(a,d){var c=Titanium.Filesystem.getFile(a);var b=Titanium.Filesystem.getFile(d);c.move(b);};sc.helpers.deleteFile=function(a){var b=Titanium.Filesystem.getFile(a);b.deleteFile();};sc.helpers.deleteDirectory=function(a){var b=Titanium.Filesystem.getFile(a);b.deleteDirectory();};sc.helpers.createDirectory=function(a){var b=Titanium.Filesystem.getFile(a);b.createDirectory();};sc.helpers.initFile=function(a){var b=Titanium.Filesystem.getFile(a);if(!b.exists||(b.exists&&overwrite)){b.setFileContents("");return true;}else{return false;}};sc.helpers.init_file=sc.helpers.initFile;sc.helpers.getAppStorageDir=function(){return Titanium.Filesystem.getApplicationDataDirectory().toString();};sc.helpers.getAppStoreDir=sc.helpers.getAppStorageDir;sc.helpers.getAppDir=function(){return Titanium.Filesystem.getApplicationDirectory().toString();};var sc,Titanium;sc.helpers.dump=function(c,d){var b,a;if(!d){d=SPAZCORE_DUMPLEVEL_DEBUG;}if(sc.dumplevel<d){return;}switch(d){case SPAZCORE_DUMPLEVEL_DEBUG:a=Titanium.API.debug;break;case SPAZCORE_DUMPLEVEL_NOTICE:a=Titanium.API.notice;break;case SPAZCORE_DUMPLEVEL_WARNING:a=Titanium.API.warn;break;case SPAZCORE_DUMPLEVEL_ERROR:a=Titanium.API.error;break;case SPAZCORE_DUMPLEVEL_NONE:return;default:a=Titanium.API.debug;}if(sc.helpers.isString(c)||sc.helpers.isNumber(c)||!c){b=function(e){a(e);};}else{b=function(){for(var e in c){a("'"+e+"':"+c[e]);}};}if(sc.helpers.isString(c)){b(c);}else{if(sc.helpers.isNumber(c)){b(c.toString());}else{if(c===undefined){b("UNDEFINED");}else{if(c===null){b("NULL");}else{b(c);}}}}};sc.helpers.openInBrowser=function(a){Titanium.Desktop.openURL(a);};var sc,Titanium;SpazPrefs.prototype.load=function(){var d=this;if(Titanium.App.Properties.hasProperty(SPAZCORE_PREFS_TI_KEY)){var f=Titanium.App.Properties.getString(SPAZCORE_PREFS_TI_KEY);try{var a=sc.helpers.deJSON(f);}catch(c){sch.error("Could not load prefs JSON using defaults");this.save();return;}for(var b in a){sc.helpers.dump('Copying loaded pref "'+b+'":"'+this._prefs[b]+'" ('+typeof(this._prefs[b])+")");this._prefs[b]=a[b];}}else{this.save();}};SpazPrefs.prototype.save=function(){var a=sc.helpers.enJSON(this._prefs);Titanium.App.Properties.setString(SPAZCORE_PREFS_TI_KEY,a);};SpazPrefs.prototype.getEncrypted=function(a){};SpazPrefs.prototype.setEncrypted=function(a,b){};SpazPrefs.prototype.saveWindowState=function(){};SpazPrefs.prototype.loadWindowState=function(){};